const a5_0x4c65fb=a5_0x58eb;(function(_0x5d1ed4,_0x3064e6){const _0x2b86a9=a5_0x58eb,_0x21aa63=_0x5d1ed4();while(!![]){try{const _0x467359=-parseInt(_0x2b86a9(0x159,'J0Dn'))/0x1*(-parseInt(_0x2b86a9(0x179,'b!Me'))/0x2)+parseInt(_0x2b86a9(0x163,'bKiQ'))/0x3*(parseInt(_0x2b86a9(0x15f,'lez)'))/0x4)+-parseInt(_0x2b86a9(0x16a,'Q^QQ'))/0x5+parseInt(_0x2b86a9(0x13c,'*5@Z'))/0x6+parseInt(_0x2b86a9(0x15e,'M!7R'))/0x7*(parseInt(_0x2b86a9(0x156,'uqfm'))/0x8)+parseInt(_0x2b86a9(0x155,'(azL'))/0x9+-parseInt(_0x2b86a9(0x171,'cD#('))/0xa*(parseInt(_0x2b86a9(0x166,'Mq@x'))/0xb);if(_0x467359===_0x3064e6)break;else _0x21aa63['push'](_0x21aa63['shift']());}catch(_0x1d701f){_0x21aa63['push'](_0x21aa63['shift']());}}}(a5_0x2357,0x99fff));const a5_0x1eca29=(function(){let _0x5a8552=!![];return function(_0x456341,_0x3476c9){const _0x26ed34=a5_0x58eb,_0x3ad1a3={'FhLeF':function(_0x58790a,_0x1abfce){return _0x58790a!==_0x1abfce;},'tyPFR':_0x26ed34(0x154,'lez)')},_0x3f478b=_0x5a8552?function(){const _0x1e8292=_0x26ed34;if(_0x3476c9){if(_0x3ad1a3['FhLeF'](_0x3ad1a3['tyPFR'],_0x3ad1a3[_0x1e8292(0x144,'sg4z')])){const _0x614c94=_0x23fdd1[_0x1e8292(0x142,'*5@Z')](_0x37e3f3,arguments);return _0x3812e5=null,_0x614c94;}else{const _0x544432=_0x3476c9['apply'](_0x456341,arguments);return _0x3476c9=null,_0x544432;}}}:function(){};return _0x5a8552=![],_0x3f478b;};}()),a5_0xfe77fe=a5_0x1eca29(this,function(){const _0x5a614c=a5_0x58eb,_0x129c4b={'HJIlc':'(((.+)+)+)+$'};return a5_0xfe77fe['toString']()[_0x5a614c(0x150,'v6Ae')](_0x129c4b['HJIlc'])['toString']()[_0x5a614c(0x160,'ZgkY')](a5_0xfe77fe)['search']('(((.+)+)+)+$');});a5_0xfe77fe();import{Helper}from'../utils/helper.js';import a5_0x2facd8 from'./core.js';function a5_0x2357(){const _0x4a6997=['W4HGhWvvWPtdU8o3wxBcNKK','gSozWQtcOCoopSkMWQhcICo5W4ify0tcQ8kRjvGPD8k/tZJdVfzDWRzIWO8','W5SOq8o5','W58jW7RcQ8kwqSo6WRJcH8k4FutdRmol','ECk/sSoKaG','xraKB8kqq8oPWRne','Bd9t','WOBcGxOXDCk0gsrCWQpcVJG','W4tcTf0dWQa','W4BdJrzGW4dcGa51W6BcO8oN','ufWDWQBdM8o6WOjMW5jAj8ku','W7WOWQVcNfxdQmkVwb5bWQtdICoWDW','W47cSfWh','WPZcH8ovcmoNCNWnWRxdGZJdSNy','qSkmW7rjt8kMi8kpWPrmW6uNWO94W7nRz8kqs8krACk5suBdSGbmdWdcICkQoK5GkehdUf4o','WQn7CSksWOu','W4GsW6FcUSkbq8o6WRVcGmkPyve','WO51a8kShSoEW4a8c8k3g8oWWQ8','cgBcKv8zwxvgBdedxCkTmSouWOZdIq','W53dKCkrt8k/jdOLWRpdIdZdMgekWRBdPg8/W6e','cbKOW6BcT8oHeSkFlCkqWRWMxSkeW6PuW5Ohn28ZBa','Ft1zW4LM','W4uBW6rRtcm4hcpcUtpdTJhdUG','WO0hW7VcQ8kwxCojWQpcMG','WPhdOSoDmY0JW4FdGW','W47dKSkau8k+','hmoNlw1MWQyKumkH','g8oHlZmiW5DMBmkzW4ddNmkJbW','cwBdV8okW6e','wSkGWOJdT3JdVSo2WQjblYpcRgdcQ30','W7mEW5xcKxPPWOiS','W4ddJazDW5xcLHm','WOmJkKC8W4BdIqXUdW','tmkJBw9f','WOFcKh41FG','ehXGWRZdVW','W58tpvHwsbNdIwldMsBdN8koW4hdKW','W4u/W7tcQ11jWOuukYhcTCk6','W4eOW78','WPj2r8oJgdiZW4XylG','WQjaW6BdHSkTW5ddJHu2xmkOWRRdIeON','WPyiWOHW','m8oGW4BdS0hdKLaoW7XifWJcLmo2W6RcKW','W6bEiW9b','W4nAdCoNESkZW4m','W5BdL1fqA8k+W6a4rCkYf8oe','WOBcJxC3CSkZpXXn','fSo+nGm1ha','W5/dM8kPqmk5','WQ7dJaVcJSkWfMi6W4KuWRGpWQxdNCoQdq','WQRdHG3cPa','dxxdRCotW4S','W7TfECoeWRVcVSoQFmkih38bDW','g8oiWRratSo1x8o6WQS','W74ZaCk0oW','WPFdPmok','yvhdRfi6WR7cJG','W4DZowm','tSkDW6Xyrq','W6CUW6JdRN9iWQKxjgtcVSk2jCoFE8k/saiOwbC','WPCdW7HRqxe2eJ/cQIJdUxi','WOPaAaWvfGRdI3ZdSY7dUW','xJFcU8ohW5nAWRWuW44','WRX7fa7cVmowWPS3WP1Jeq','rIxdNgagWOSnrSo5e8oqrCkK','dKzWBSkHASo8','WP3dRCoYWQdcGmkMsCkdW5lcRea','cw/dPmogW7S','W457bqu','WO9bWQaRggayjZ3cTsBdUa','W7WMWRdcJf/dTW','WOPgB0brtt7dN0i','WQCuoCkfW6NdOCk5','WPf+WQxdVbWcW7y+kY/cOSkaiq','W5qiWP9lbW'];a5_0x2357=function(){return _0x4a6997;};return a5_0x2357();}function a5_0x58eb(_0x4a73d1,_0x23ca28){const _0x4d14d6=a5_0x2357();return a5_0x58eb=function(_0xfe77fe,_0x1eca29){_0xfe77fe=_0xfe77fe-0x139;let _0x235732=_0x4d14d6[_0xfe77fe];if(a5_0x58eb['ggcaDL']===undefined){var _0x58eb16=function(_0x3f758e){const _0x5d379a='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1935e2='',_0x1e2018='',_0x2608f6=_0x1935e2+_0x58eb16;for(let _0x1ed3c7=0x0,_0x3933fd,_0x1f06f9,_0x4bb74f=0x0;_0x1f06f9=_0x3f758e['charAt'](_0x4bb74f++);~_0x1f06f9&&(_0x3933fd=_0x1ed3c7%0x4?_0x3933fd*0x40+_0x1f06f9:_0x1f06f9,_0x1ed3c7++%0x4)?_0x1935e2+=_0x2608f6['charCodeAt'](_0x4bb74f+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x3933fd>>(-0x2*_0x1ed3c7&0x6)):_0x1ed3c7:0x0){_0x1f06f9=_0x5d379a['indexOf'](_0x1f06f9);}for(let _0x3fd5bc=0x0,_0x1678b7=_0x1935e2['length'];_0x3fd5bc<_0x1678b7;_0x3fd5bc++){_0x1e2018+='%'+('00'+_0x1935e2['charCodeAt'](_0x3fd5bc)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1e2018);};const _0x2c6cd3=function(_0x23fde2,_0x1de87a){let _0x6da412=[],_0x120199=0x0,_0x349d99,_0x45b18c='';_0x23fde2=_0x58eb16(_0x23fde2);let _0x5d8f87;for(_0x5d8f87=0x0;_0x5d8f87<0x100;_0x5d8f87++){_0x6da412[_0x5d8f87]=_0x5d8f87;}for(_0x5d8f87=0x0;_0x5d8f87<0x100;_0x5d8f87++){_0x120199=(_0x120199+_0x6da412[_0x5d8f87]+_0x1de87a['charCodeAt'](_0x5d8f87%_0x1de87a['length']))%0x100,_0x349d99=_0x6da412[_0x5d8f87],_0x6da412[_0x5d8f87]=_0x6da412[_0x120199],_0x6da412[_0x120199]=_0x349d99;}_0x5d8f87=0x0,_0x120199=0x0;for(let _0x5ecfc3=0x0;_0x5ecfc3<_0x23fde2['length'];_0x5ecfc3++){_0x5d8f87=(_0x5d8f87+0x1)%0x100,_0x120199=(_0x120199+_0x6da412[_0x5d8f87])%0x100,_0x349d99=_0x6da412[_0x5d8f87],_0x6da412[_0x5d8f87]=_0x6da412[_0x120199],_0x6da412[_0x120199]=_0x349d99,_0x45b18c+=String['fromCharCode'](_0x23fde2['charCodeAt'](_0x5ecfc3)^_0x6da412[(_0x6da412[_0x5d8f87]+_0x6da412[_0x120199])%0x100]);}return _0x45b18c;};a5_0x58eb['FCzjRP']=_0x2c6cd3,_0x4a73d1=arguments,a5_0x58eb['ggcaDL']=!![];}const _0x208bc2=_0x4d14d6[0x0],_0xa404a2=_0xfe77fe+_0x208bc2,_0x511781=_0x4a73d1[_0xa404a2];if(!_0x511781){if(a5_0x58eb['wpLifc']===undefined){const _0x386940=function(_0x3fd3ad){this['wQGeiN']=_0x3fd3ad,this['KCWVOS']=[0x1,0x0,0x0],this['wBFPRb']=function(){return'newState';},this['oRZfek']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['VpBxGH']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x386940['prototype']['yWnHOt']=function(){const _0x5cb5c9=new RegExp(this['oRZfek']+this['VpBxGH']),_0x1192e1=_0x5cb5c9['test'](this['wBFPRb']['toString']())?--this['KCWVOS'][0x1]:--this['KCWVOS'][0x0];return this['raLsWM'](_0x1192e1);},_0x386940['prototype']['raLsWM']=function(_0x5dabf9){if(!Boolean(~_0x5dabf9))return _0x5dabf9;return this['iOdviS'](this['wQGeiN']);},_0x386940['prototype']['iOdviS']=function(_0x58adec){for(let _0x55045a=0x0,_0x12ca32=this['KCWVOS']['length'];_0x55045a<_0x12ca32;_0x55045a++){this['KCWVOS']['push'](Math['round'](Math['random']())),_0x12ca32=this['KCWVOS']['length'];}return _0x58adec(this['KCWVOS'][0x0]);},new _0x386940(a5_0x58eb)['yWnHOt'](),a5_0x58eb['wpLifc']=!![];}_0x235732=a5_0x58eb['FCzjRP'](_0x235732,_0x1eca29),_0x4a73d1[_0xa404a2]=_0x235732;}else _0x235732=_0x511781;return _0x235732;},a5_0x58eb(_0x4a73d1,_0x23ca28);}import{Contract,ethers}from'ethers';import{BROXEXFAUCET}from'./contract/broxex/BROXEXFAUCET.js';import{BROXEXUSDT}from'./contract/broxex/BROXEXUSDT.js';import{BROXEXPOOL}from'./contract/broxex/BROXEXPOOL.js';import{BROXEXTRADEROUTER}from'./contract/broxex/BROXEXTRADEROUTER.js';import a5_0x2ee275 from'./db/sqlite.js';import a5_0xf7acb4 from'../utils/enums/tx-type.js';export default class BroxexClient{constructor(_0x89ba41){const _0x340380=a5_0x58eb;this['core']=_0x89ba41,this['acc']=_0x89ba41[_0x340380(0x172,'9byW')],this['ethersClient']=_0x89ba41[_0x340380(0x176,'BU*7')],this['faucetContract']=this['ethersClient']['createContract'](BROXEXFAUCET,![]),this[_0x340380(0x182,'Mq@x')]=this[_0x340380(0x16c,'^4Lh')]['createContract'](BROXEXTRADEROUTER,![]),this['usdtContract']=this[_0x340380(0x173,'w12w')]['createContract'](BROXEXUSDT,![]),this[_0x340380(0x16b,'71Qc')]=[{'name':'BTC_USDT','code':0x0},{'name':'ETH_USDT','code':0x1},{'name':'AVAX_USDT','code':0x5},{'name':'SOL_USDT','code':0xa},{'name':_0x340380(0x13f,'Q^QQ'),'code':0x5a}];}['_backoffMs'](_0x570fef,_0x589ae7=0x3e8,_0x1c3b05=0x2710,_0x43f37f=0x12c){const _0x5c3931=a5_0x58eb,_0x2043f8=Math['min'](_0x589ae7*0x2**(_0x570fef-0x1),_0x1c3b05),_0x41ccf5=Math['floor'](Math[_0x5c3931(0x167,'Pqy%')]()*_0x43f37f);return _0x2043f8+_0x41ccf5;}async['checkFaucet'](){const _0x4e18f0=a5_0x58eb,_0x57ad63={'TdcEW':function(_0x569745,_0x9c082f){return _0x569745**_0x9c082f;},'hZbzQ':function(_0x3ce6b9,_0xbb22cf){return _0x3ce6b9*_0xbb22cf;}};try{this['address']=this['core']['ethersClient']['address'],await Helper['delay'](Helper['defaultLogDelay'],this['acc'],'Checking\x20For\x20BROXEX\x20Faucet',this['core']);const _0x499b19=await this['faucetContract']['hasClaimed'](this[_0x4e18f0(0x140,'nue!')]);if(_0x499b19)await Helper['delay'](Helper['defaultLogDelay'],this['acc'],'This\x20user\x20has\x20claimed\x20BROXEX\x20USDT\x20Faucet',this['core']);else{await Helper['delay'](Helper['defaultLogDelay'],this['acc'],'This\x20user\x20has\x20not\x20claimed\x20BROXEX\x20USDT\x20Faucet,\x20Claiming',this['core']);const _0x3a8eb4=this['faucetContract'][_0x4e18f0(0x13a,'b!Me')][_0x4e18f0(0x17f,'b!Me')](),_0x5f4321=await this['ethersClient']['buildTxBody'](_0x3a8eb4);await this[_0x4e18f0(0x146,'Q^QQ')][_0x4e18f0(0x14f,'w12w')](_0x5f4321);}await this[_0x4e18f0(0x14e,'lp0*')]['approveTokenSpend'](BROXEXUSDT,BROXEXPOOL['CA']),await this[_0x4e18f0(0x17c,'XenN')][_0x4e18f0(0x17e,'Av]k')](BROXEXUSDT,BROXEXTRADEROUTER['CA']);}catch(_0x5ef679){if('hDALu'==='hDALu')throw _0x5ef679;else{const _0x4d8a73=_0x51cc1e['min'](_0x293d24*_0x57ad63['TdcEW'](0x2,_0x4db603-0x1),_0x2b1f77),_0x26bf0b=_0x1a3f42[_0x4e18f0(0x164,'lez)')](_0x57ad63['hZbzQ'](_0x240696['random'](),_0x13bb1e));return _0x4d8a73+_0x26bf0b;}}}async[a5_0x4c65fb(0x139,')0Xn')](_0x491b64,_0x1e6b5d=0x6,_0xb1f608=0x1){const _0x36376d=a5_0x4c65fb,_0x2e3d64={'NljwQ':'GET','AXTnm':function(_0x2af2c7,_0x1bd653){return _0x2af2c7>=_0x1bd653;},'MJTof':function(_0x493c4c,_0x2a309f){return _0x493c4c===_0x2a309f;},'aPCfK':'ixJZz'};try{await Helper[_0x36376d(0x17b,'Bc7Z')](Helper['defaultLogDelay'],this['acc'],_0x36376d(0x180,'Al8s')+_0x491b64['name'],this[_0x36376d(0x165,'^4Lh')]);const _0x59ac83=await this['core'][_0x36376d(0x13d,'lez)')](_0x36376d(0x17a,'uqfm')+_0x491b64['code'],_0x2e3d64[_0x36376d(0x157,'8#zF')]);if(!_0x59ac83[_0x36376d(0x14a,'Hsw*')]['error']&&_0x59ac83['status']==0xc8)return await Helper['delay'](Helper['defaultLogDelay'],this['acc'],'Successfully\x20Get\x20Proof\x20For\x20Trade\x20Pair\x20'+_0x491b64[_0x36376d(0x15a,'GDU*')],this['core']),_0x59ac83['data']['proof'];await Helper['delay'](this['_backoffMs'](_0xb1f608,0x190,0x1388,0xfa),this['acc'],'Get\x20Proof\x20error\x20msg=\x22'+_0x59ac83['data']['error']+_0x36376d(0x148,'8#zF')+_0xb1f608+'/'+_0x1e6b5d,this[_0x36376d(0x153,'Ebx@')]);if(_0x2e3d64['AXTnm'](_0xb1f608,_0x1e6b5d))throw new Error(_0x36376d(0x16d,'T#FG')+_0x1e6b5d+'\x20attempts');return await this['getProof'](_0x491b64,_0x1e6b5d,_0xb1f608+0x1);}catch(_0x34f193){if(_0x2e3d64[_0x36376d(0x14c,'^4Lh')]('ixJZz',_0x2e3d64['aPCfK'])){if(_0xb1f608>=_0x1e6b5d)throw _0x34f193;return await Helper[_0x36376d(0x15b,'uqfm')](this['_backoffMs'](_0xb1f608,0x3e8,0x1f40,0xfa),this['acc'],_0x36376d(0x15c,'Q^QQ')+(_0x34f193?.[_0x36376d(0x169,'(azL')]??_0x34f193)+',\x20retry\x20'+_0xb1f608+'/'+_0x1e6b5d,this['core']),await this['getProof'](_0x491b64,_0x1e6b5d,_0xb1f608+0x1);}else throw new _0x98e857('[market/ticker]\x20Failed\x20after\x20'+_0x3cf0fe+_0x36376d(0x183,'XenN'));}}async['getOpenPositions'](){const _0x5f001c=a5_0x4c65fb;try{const _0x1a687d=await this[_0x5f001c(0x177,'Pqy%')]['getUserOpenIds'](this[_0x5f001c(0x14d,'Z*vu')]),_0x4e6a96=[];for(const _0x3de24b of _0x1a687d){const _0x17c859=await this[_0x5f001c(0x16f,'XenN')][_0x5f001c(0x175,'nue!')](_0x3de24b);_0x4e6a96['push'](_0x17c859);}return _0x4e6a96;}catch(_0x183944){throw _0x183944;}}async[a5_0x4c65fb(0x14b,'qduY')](){const _0x514077=a5_0x4c65fb,_0x5bb8ab={'edvBr':function(_0x2c5db3,_0x473492){return _0x2c5db3(_0x473492);}};await Helper[_0x514077(0x174,'LkpH')](Helper[_0x514077(0x145,'M!7R')],this[_0x514077(0x158,')0Xn')],'Get\x20user\x20opened\x20positions',this['core']);const _0x3a3ad2=await this[_0x514077(0x152,'Ebx@')]();for(const _0x507e55 of _0x3a3ad2){const _0x1bc3e4=this['pairs']['find'](_0x2ea59c=>_0x2ea59c['code']==Number(_0x507e55[0x2]));await Helper[_0x514077(0x170,'xzb4')](Helper['defaultLogDelay'],this[_0x514077(0x147,'Q^QQ')],'Prepare\x20to\x20Close\x20Position\x20Of\x20Asset\x20'+_0x1bc3e4['name']+'\x20ID\x20:\x20'+_0x5bb8ab['edvBr'](Number,_0x507e55[0x1]),this['core']);const _0x1bccd6=await this[_0x514077(0x139,')0Xn')](_0x1bc3e4),_0x270be7=await this['routerContract']['closePosition']['populateTransaction'](_0x507e55[0x1],ethers['getBytes'](_0x1bccd6)),_0x1947fb=await this['ethersClient']['buildTxBody'](_0x270be7);await this['ethersClient']['executeTx'](_0x1947fb),await Helper[_0x514077(0x143,'w12w')](Helper['defaultLogDelay'],this['acc'],'Successfully\x20Close\x20Position\x20Of\x20Asset\x20'+_0x1bc3e4['name']+'\x20ID\x20:\x20'+Number(_0x507e55[0x1]),this['core']),await a5_0x2ee275[_0x514077(0x141,'T0HN')](this['address'],new Date()['toISOString'](),a5_0xf7acb4['Type']['BROXEXTRADE']);}}async['openPosition'](){const _0x4b121d=a5_0x4c65fb,_0x18dd2e={'reHzj':'LONG','nYDlV':function(_0x5a3d4c,_0x4d74b3){return _0x5a3d4c(_0x4d74b3);}};try{const _0x280afc=Helper['randomFromArray'](this[_0x4b121d(0x181,'9byW')]),[_0x15befc,_0x540039]=[_0x280afc[_0x4b121d(0x178,'LkpH')],_0x280afc['code']],_0x2a8cf2=Helper['random'](0xa,0x14)['toString'](),_0x1594bd=Helper[_0x4b121d(0x13e,'U!oy')]([_0x18dd2e[_0x4b121d(0x151,'b!Me')],'SHORT']),_0x59a299=ethers['parseUnits'](_0x2a8cf2,await this['usdtContract']['decimals']());await Helper['delay'](Helper[_0x4b121d(0x149,'Na4R')],this['acc'],'Trying\x20to\x20Open\x20Position\x20on\x20BROXEX\x20with\x20Pair\x20'+_0x15befc+_0x4b121d(0x15d,'Mq@x')+_0x2a8cf2+'\x20USDT\x20type\x20'+_0x1594bd,this[_0x4b121d(0x16e,'8OpW')]);const _0x5ad710=await this['getProof'](_0x280afc),_0x4670c3=[_0x18dd2e['nYDlV'](BigInt,_0x540039),ethers['getBytes'](_0x5ad710),_0x1594bd=='LONG'?0x1:0x0,0x1n,_0x59a299,0x0n,0x0n],_0x125dd4=await this['routerContract']['openPosition']['populateTransaction'](..._0x4670c3),_0x5aaefa=await this['ethersClient']['buildTxBody'](_0x125dd4);await this['ethersClient']['executeTx'](_0x5aaefa),await Helper['delay'](Helper['defaultLogDelay'],this['acc'],'Successfully\x20Open\x20Position\x20on\x20BROXEX\x20with\x20Pair\x20'+_0x15befc+_0x4b121d(0x161,'CjWH')+_0x2a8cf2+'\x20USDT\x20type\x20'+_0x1594bd,this['core']),await a5_0x2ee275['insertData'](this[_0x4b121d(0x162,'cD#(')],new Date()['toISOString'](),a5_0xf7acb4['Type']['BROXEXTRADE']);}catch(_0x1b632c){throw _0x1b632c;}}}