const a4_0x24e538=a4_0x399e;(function(_0x1de61b,_0x5edf69){const _0x16b3d3=a4_0x399e,_0x55a031=_0x1de61b();while(!![]){try{const _0x1d9b4e=parseInt(_0x16b3d3(0x19b,'SUsM'))/0x1*(-parseInt(_0x16b3d3(0x190,'dtA#'))/0x2)+-parseInt(_0x16b3d3(0x169,'bVJe'))/0x3*(parseInt(_0x16b3d3(0x17f,'h!dz'))/0x4)+-parseInt(_0x16b3d3(0x1a8,'qp5V'))/0x5*(parseInt(_0x16b3d3(0x136,'4iZN'))/0x6)+-parseInt(_0x16b3d3(0x191,'wA]U'))/0x7+parseInt(_0x16b3d3(0x179,'vQMe'))/0x8*(-parseInt(_0x16b3d3(0x135,'%Yph'))/0x9)+-parseInt(_0x16b3d3(0x161,'wA]U'))/0xa+-parseInt(_0x16b3d3(0x198,'qp5V'))/0xb*(-parseInt(_0x16b3d3(0x143,'2Cdi'))/0xc);if(_0x1d9b4e===_0x5edf69)break;else _0x55a031['push'](_0x55a031['shift']());}catch(_0x3634ce){_0x55a031['push'](_0x55a031['shift']());}}}(a4_0x3e69,0x3a48e));const a4_0x1b6eb7=(function(){let _0x3a26b2=!![];return function(_0x40e206,_0x6c288){const _0x210c8b=_0x3a26b2?function(){if(_0x6c288){const _0x4d5660=_0x6c288['apply'](_0x40e206,arguments);return _0x6c288=null,_0x4d5660;}}:function(){};return _0x3a26b2=![],_0x210c8b;};}()),a4_0x703814=a4_0x1b6eb7(this,function(){const _0x578a07=a4_0x399e;return a4_0x703814['toString']()[_0x578a07(0x13e,'Eyjp')]('(((.+)+)+)+$')['toString']()[_0x578a07(0x18a,'vQMe')](a4_0x703814)['search']('(((.+)+)+)+$');});a4_0x703814();import{Helper}from'../utils/helper.js';import a4_0x5ec257 from'./core.js';import{Contract,ethers}from'ethers';import{USDT}from'./contract/token/USDT.js';import{BITVERSEPOSITIONROUTER}from'./contract/bitverse/BITVERSEPOSITIONROUTER.js';import{BITVERSETRADEROUTER}from'./contract/bitverse/BITVERSETRADEROUTER.js';function a4_0x3e69(){const _0x47d513=['W4Djc8ooWPFcIq','W7JdISkJW5SzW7u','W4RdISoCnSo1bx5E','W6Pwgmo5WPvIWRjhW68rW4Kb','d8kVaGO','FSk1DmoYW7ddRSk8B1rqtvbzWQFcU8o1svtdUSo4jhHeWRre','FCkQW5GFA8kmcv4pEW','W4eVaSoZ','W7ldUhhdHmoewqVdSmkWW7q7WQJcUa','WPLAFSoiW4xdPXtdKa/cS0tcVCkSW4f0WPSUW4tdKSolvZBcRSkcctNcTXvfsJyTWQqTxsFdNMa','WOpcI8oMkHJcIxddHaCHW54NACongG','W63dKSkZWO/cJCkuW6NdPSkmCcJdTW','W5rUW77dOgC','W7hdGrddO8olB8kJy1pcSComW7hcJmoMW7e','W7GMzt3dKdpcRSkpWRFcRq','W6WwemkEp8kGW4q','WPeqt8oJ','s8kZECoNW6pdR8kAi0LAa1a','qx/cGSo4b8oC','WR40ACoiW53cMmoxFW','WRSztmkQW5KKWRLjW4y','wCohhd3dGComCXuIW4W','DIddQvqLW5RcVM5ZBmkgWRBcQa','WQncWQxdSSosW4afW5/dKdZdV8kh','W4NdJSoCfq','WRZcGmojW7C','k1eakq','W4RcMCkDW5hcH1ZcMZKkqrRdNJXNa8kMtaFcGmoC','W75npqhcOh7cL0ypW5axpW','W5pcVCoR','WPebcSoLlSoxWQC','W6VdICkPWO8','k8o7WQtcTHxdPCoRW79ppmkE','z8kxA2ORW7zhzcJdOXFdNmkkWOVdOCkoWP4','W7dcS1tcTCkMWQtdJmkkwmk6WPldGmozW794W5CyW4/cLa','DWL4WPVdGW','wSkXgtz+','WQtcRCkHtmkeWOhdTSo9WR1lfCkCfHTzW7Hb','WR1aW6n9','WOClsSo+l8onga','W5VcLmklW4FcGh0','W5byemoEWONcJSo3aZTMFhy','n1ZcQJvU','c3NdLuNcJ8oWzSkXqW','jNlcSW','bCkFA2GRW6LeDxVcOv7dNmkkWPBdTSorWP5ao3ZcUxzsW7viW4WDhgO','W6zGWQldJJHlE145','z3dcPbvXWOldVMbAaSo+WPxcV8oDvSo7fG','W6tcUulcOCk/WQNdJmkJy8kVWRFdI8ogW79I','wmk5WPy','ycT2WPJdKCkXWOi','uSoxbdFdHmoenqCaWP8Oh8oRE8ovWPHTWQy','mSoSW6LdWQhcLmkyW6DoW6SsWPm','WO/dVxH8WQq1W5RcMq','W5BcU8oKnmoe','W7jsW5ddK1m','ugJcLmoSh8onWQypWRznps57ba','WRnfWQNdO8oJW5WOW4FdIZJdSSkh','ACkEpf0','W6Wsfmkq','oGXaesSXWQGjfmkV','W6lcLSojb8oYfa','W4VdLhPMWR10W6BcMmoIWQP8WQC','WRq5W7ZdLq9wqN86hCoN','CSkffbTI','h3tdN17cN8ouCCkmwmop','W5rpgW','WRyMF8o0dSoGoq','kmo7WOnkEW','ECkGW7RdRd7dOCooW6HUga','FYpdOLuKW5BdQer7CSkgWQe','cSkVftvS','tfNdHCoJW7G','WR8csG','BSkqWPemWP0Yor7dPJ3cRNi3','kqvxasuXWPuKnmkFWOPSWOddJSkhbM/dM8kVWQe','lmoXWR3cTYtdRCoZ','W6XqgCo9WPXPW61RW7O1W4SHWRS','W6zzg8oyWP7cJSohcsDVFNTDESkJWQbLyq7cMMxdTwHfW5S2gSkCkg42afzlW5tcKghcRHNdVSk6xxdcVmkaquzx','laWBWQBdQ8kCW4XIumo6s8oFyComrq','bIJdImovjCoDWRqoWO8','xCkMedzZkb3cKSo/d0/cPG3cSa','W6JcI8oqlSoP','WRtdUNjHWR8XW4tcMCoUWOf8W6BcLmkvy8oh','WPJcNCkrlmocbePdW4u','W4RcNSkkW5C','chtdNeBcVmoTB8kjEColBd3dR8ozWOxdTSk0WOtdPG','W7LmpaJcTLNcRgGjW5ea','k8o7WR/cVq','e8o8WO5iACkgjK4ntW','y8k1W5uDWRTVtYZcTcOvWOpdHCod','WRTBW7L9vmoaWPrfW6GbW7/dVa','WOr3WQtdVs/dTCk2mSkOwSkzW6JdVW','W6SVBmkQW7K5WRy','iCkeCu46','DJDXWO/dL8knWOGYW5X7W6tdNa','kX1cdJC','WRBdVmoKdCouW5NdICohWR4buCkf','cmoTW4hcSCkmW5PyW4LEW6aQW6vR','W6ZcUvlcPCk4WQtdN8kksCo6','d3FdKupcLSoLyCkjxSoOytddOmouWOpdLCkxWOVdQqrB','WRiIW7RdGWLxDhaNf8o7CW','WP/cN8kzqCk5rfrJW6lcMCo/oq','W6vyW5BdLt7dI8oNiSo6smoiW7hdQMqpWP7dVIi/CMZdQIlcRhPsWQhcUmogpttdQSobW67dHGGXcYhcISo2WOzdW4jNWORcHCkQW401jCoKW5zN','W6pcS1BcPq','W7xcUCk6tmkeWRZdTmoGWQ0o','tSkcluO+bW','W5NcOCoOaG','Dmk+WQWWW7FdGSkt','t8kKCG','b1Ofl8orWQWqWPKpWPO','FfbpWPhdLSkFW4rEAW','h3tdN17cN8ouCCkmwmopidNdS8oiWO/dGSoHW4ldPH5AW7ZdIW','amo6W6RcKx5EW7RdLdtdM2xcRSkEmmoDW7aLW5WwW5TpW5JcRLxdKLKmghm','B8kHgInUiZNdNCobcvtcPaVdPmoLc08XW6WMW4/cVSo3','lGHEaZC','W6OHBYJdGqBcN8kjWRRcVmk3lbSF','WQRdGSkKW7fxWRa','z8k4WRS'];a4_0x3e69=function(){return _0x47d513;};return a4_0x3e69();}import{RPC}from'./network/rpc.js';function a4_0x399e(_0x925147,_0x26ec09){const _0x2b51d6=a4_0x3e69();return a4_0x399e=function(_0x703814,_0x1b6eb7){_0x703814=_0x703814-0x134;let _0x3e6972=_0x2b51d6[_0x703814];if(a4_0x399e['ibFWdm']===undefined){var _0x399e66=function(_0x54d15f){const _0xd91124='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1cba50='',_0x2c0ab7='',_0x6eb17a=_0x1cba50+_0x399e66;for(let _0x4f8ee8=0x0,_0x378d34,_0x2209c8,_0x4c2003=0x0;_0x2209c8=_0x54d15f['charAt'](_0x4c2003++);~_0x2209c8&&(_0x378d34=_0x4f8ee8%0x4?_0x378d34*0x40+_0x2209c8:_0x2209c8,_0x4f8ee8++%0x4)?_0x1cba50+=_0x6eb17a['charCodeAt'](_0x4c2003+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x378d34>>(-0x2*_0x4f8ee8&0x6)):_0x4f8ee8:0x0){_0x2209c8=_0xd91124['indexOf'](_0x2209c8);}for(let _0x3bac92=0x0,_0x143687=_0x1cba50['length'];_0x3bac92<_0x143687;_0x3bac92++){_0x2c0ab7+='%'+('00'+_0x1cba50['charCodeAt'](_0x3bac92)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x2c0ab7);};const _0xb74cf1=function(_0x1412c1,_0x1732d7){let _0x346baa=[],_0x226996=0x0,_0x496ca4,_0x250c85='';_0x1412c1=_0x399e66(_0x1412c1);let _0x12940f;for(_0x12940f=0x0;_0x12940f<0x100;_0x12940f++){_0x346baa[_0x12940f]=_0x12940f;}for(_0x12940f=0x0;_0x12940f<0x100;_0x12940f++){_0x226996=(_0x226996+_0x346baa[_0x12940f]+_0x1732d7['charCodeAt'](_0x12940f%_0x1732d7['length']))%0x100,_0x496ca4=_0x346baa[_0x12940f],_0x346baa[_0x12940f]=_0x346baa[_0x226996],_0x346baa[_0x226996]=_0x496ca4;}_0x12940f=0x0,_0x226996=0x0;for(let _0x3f716b=0x0;_0x3f716b<_0x1412c1['length'];_0x3f716b++){_0x12940f=(_0x12940f+0x1)%0x100,_0x226996=(_0x226996+_0x346baa[_0x12940f])%0x100,_0x496ca4=_0x346baa[_0x12940f],_0x346baa[_0x12940f]=_0x346baa[_0x226996],_0x346baa[_0x226996]=_0x496ca4,_0x250c85+=String['fromCharCode'](_0x1412c1['charCodeAt'](_0x3f716b)^_0x346baa[(_0x346baa[_0x12940f]+_0x346baa[_0x226996])%0x100]);}return _0x250c85;};a4_0x399e['yCMgTZ']=_0xb74cf1,_0x925147=arguments,a4_0x399e['ibFWdm']=!![];}const _0x356fdd=_0x2b51d6[0x0],_0x3c1c07=_0x703814+_0x356fdd,_0x3b445d=_0x925147[_0x3c1c07];if(!_0x3b445d){if(a4_0x399e['MHXXhD']===undefined){const _0x2da62b=function(_0x423cd0){this['aiVGCh']=_0x423cd0,this['iQpiAB']=[0x1,0x0,0x0],this['OwLLQc']=function(){return'newState';},this['InUxby']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['JPXFih']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2da62b['prototype']['ixXfto']=function(){const _0x435da3=new RegExp(this['InUxby']+this['JPXFih']),_0x5b902e=_0x435da3['test'](this['OwLLQc']['toString']())?--this['iQpiAB'][0x1]:--this['iQpiAB'][0x0];return this['DEEjJS'](_0x5b902e);},_0x2da62b['prototype']['DEEjJS']=function(_0x24d1d5){if(!Boolean(~_0x24d1d5))return _0x24d1d5;return this['bIQdtY'](this['aiVGCh']);},_0x2da62b['prototype']['bIQdtY']=function(_0x2d6133){for(let _0x256f25=0x0,_0x1f81ba=this['iQpiAB']['length'];_0x256f25<_0x1f81ba;_0x256f25++){this['iQpiAB']['push'](Math['round'](Math['random']())),_0x1f81ba=this['iQpiAB']['length'];}return _0x2d6133(this['iQpiAB'][0x0]);},new _0x2da62b(a4_0x399e)['ixXfto'](),a4_0x399e['MHXXhD']=!![];}_0x3e6972=a4_0x399e['yCMgTZ'](_0x3e6972,_0x1b6eb7),_0x925147[_0x3c1c07]=_0x3e6972;}else _0x3e6972=_0x3b445d;return _0x3e6972;},a4_0x399e(_0x925147,_0x26ec09);}import a4_0x277f7c from'./db/sqlite.js';import a4_0x1329cc from'../utils/enums/tx-type.js';export default class BitverseClient{constructor(_0x57870f){const _0x560a9a=a4_0x399e,_0x360c25={'PpLBk':_0x560a9a(0x1a7,'uOF*')},_0x5d90f7=_0x360c25['PpLBk']['split']('|');let _0x454075=0x0;while(!![]){switch(_0x5d90f7[_0x454075++]){case'0':this['positionContract']=this['ethersClient']['createContract'](BITVERSEPOSITIONROUTER);continue;case'1':this['ethersClient']=_0x57870f[_0x560a9a(0x15c,'#Q3*')];continue;case'2':this['usdtContract']=this[_0x560a9a(0x1aa,'KxcN')]['createContract'](USDT,![]);continue;case'3':this['routerContract']=this['ethersClient'][_0x560a9a(0x148,'AuBG')](BITVERSETRADEROUTER);continue;case'4':this['core']=_0x57870f;continue;case'5':this['_bitverseHeaders']={'Chain-id':RPC['CHAINID'],'Tenant-id':'PHAROS'};continue;case'6':this[_0x560a9a(0x141,'#Q3*')]=_0x57870f['acc'];continue;}break;}}['setFullFillBalanceFunc'](_0x49fcc0){this['fullFillBalanceFunc']=_0x49fcc0;}['_backoffMs'](_0x3bbc28,_0x2139ae=0x3e8,_0x2b0467=0x2710,_0x18de18=0x12c){const _0x4e8097={'tEGoM':function(_0x1ac79b,_0x551cd3){return _0x1ac79b+_0x551cd3;}},_0x3170ae=Math['min'](_0x2139ae*0x2**(_0x3bbc28-0x1),_0x2b0467),_0x5ca44e=Math['floor'](Math['random']()*_0x18de18);return _0x4e8097['tEGoM'](_0x3170ae,_0x5ca44e);}async[a4_0x24e538(0x166,'JV]F')](_0x104dd9=0x8,_0x502a83=0x1){const _0x36b8ef=a4_0x24e538,_0x34a892={'vvbwi':function(_0x218bde,_0x1d5204){return _0x218bde===_0x1d5204;},'jogOD':function(_0x348204,_0x26ade0){return _0x348204(_0x26ade0);},'FpIbX':function(_0x271e31,_0x224da9){return _0x271e31===_0x224da9;},'PhKTp':function(_0x5e16e9,_0x4cdeb6){return _0x5e16e9>=_0x4cdeb6;},'foeZE':function(_0xb03251,_0x9fa574){return _0xb03251+_0x9fa574;}};try{await Helper['delay'](Helper[_0x36b8ef(0x158,'7vDx')],this['acc'],_0x36b8ef(0x154,'KYhr'),this[_0x36b8ef(0x1a0,'JV]F')]);const _0x51b24a=await this['core']['fetch']('https://api.bitverse.zone/bitverse/trade-data/v1/account/balance/allCoinBalance','POST',undefined,{'address':this['address']},this[_0x36b8ef(0x19e,'5I^Q')]),_0x2a1cb9=_0x51b24a?.['data']?.['retCode'],_0x1ac6f2=_0x51b24a?.['data']?.[_0x36b8ef(0x14c,'OM42')]??'';if(_0x34a892['vvbwi'](_0x2a1cb9,0x0)){const _0x1b3de3=_0x51b24a['data'][_0x36b8ef(0x173,'JV]F')]?.[_0x36b8ef(0x16b,'dtA#')]?.['find'](_0xb48407=>_0xb48407['coinName']==='USDT');if(_0x1b3de3&&_0x1b3de3['availableBalanceValue']!=null){const _0x594be5=_0x34a892['jogOD'](Number,_0x1b3de3[_0x36b8ef(0x138,'azOD')]);return await Helper[_0x36b8ef(0x16f,'7wUI')](Helper['defaultLogDelay'],this['acc'],'USDT\x20Coin\x20Balance\x20on\x20Bitverse\x20is\x20'+_0x1b3de3['availableBalanceValue'],this[_0x36b8ef(0x164,'w$Tk')]),_0x594be5;}}else await Helper['delay'](this[_0x36b8ef(0x160,'0#OF')](_0x502a83),this[_0x36b8ef(0x194,'qp5V')],_0x36b8ef(0x178,'px%N')+_0x2a1cb9+'\x20msg=\x22'+_0x1ac6f2+'\x22),\x20retry\x20'+_0x502a83+'/'+_0x104dd9,this[_0x36b8ef(0x1a3,'dtA#')]);if(_0x502a83>=_0x104dd9)throw new Error('[balance/allCoinBalance]\x20Failed\x20after\x20'+_0x104dd9+_0x36b8ef(0x170,'%Yph')+_0x2a1cb9+'\x20'+_0x1ac6f2+')');return await this['checkUSDTCoinBalance'](_0x104dd9,_0x502a83+0x1);}catch(_0x50f74d){if(_0x34a892['FpIbX']('NLNTh','NLNTh')){if(_0x34a892['PhKTp'](_0x502a83,_0x104dd9))throw _0x50f74d;return await Helper[_0x36b8ef(0x147,'CfX4')](this[_0x36b8ef(0x142,']miu')](_0x502a83),this['acc'],'Bitverse\x20balance\x20exception:\x20'+(_0x50f74d?.['message']??_0x50f74d)+',\x20retry\x20'+_0x502a83+'/'+_0x104dd9,this['core']),await this['checkUSDTCoinBalance'](_0x104dd9,_0x34a892[_0x36b8ef(0x192,'hXnl')](_0x502a83,0x1));}else{const _0x58bc1c=_0x4c2003?function(){const _0x4e2c19=_0x36b8ef;if(_0x226996){const _0x123bec=_0x3f716b[_0x4e2c19(0x134,'CfX4')](_0x2da62b,arguments);return _0x423cd0=null,_0x123bec;}}:function(){};return _0x346baa=![],_0x58bc1c;}}}async[a4_0x24e538(0x159,'AuBG')](_0x2e89d8,_0x5d8e1f=0x6,_0xbfda56=0x1){const _0x488cef=a4_0x24e538,_0x4d2367={'SNVXs':'GET','Xwjza':function(_0x73026f,_0x356a68){return _0x73026f===_0x356a68;},'ZxkmS':'LQaLe','KeJri':function(_0x1413a5,_0x2ef467){return _0x1413a5+_0x2ef467;}};try{await Helper[_0x488cef(0x181,'gaWY')](Helper['defaultLogDelay'],this['acc'],_0x488cef(0x146,'7wUI')+_0x2e89d8,this['core']);const _0x1f616a=await this['core']['fetch']('https://api.bitverse.zone/bitverse/quote-all-in-one/v1/public/market/ticker?symbol='+_0x2e89d8,_0x4d2367['SNVXs'],undefined,undefined,this['_bitverseHeaders']),_0x15606a=_0x1f616a?.[_0x488cef(0x186,'5CR@')]?.[_0x488cef(0x140,'h!dz')],_0x52c01f=_0x1f616a?.[_0x488cef(0x163,'BOYJ')]?.['retMsg']??'';if(_0x15606a===0x0&&_0x1f616a?.['data']?.['result'])return _0x1f616a['data']['result'];await Helper['delay'](this['_backoffMs'](_0xbfda56,0x190,0x1388,0xfa),this['acc'],_0x488cef(0x144,'azOD')+_0x15606a+_0x488cef(0x149,'OM42')+_0x52c01f+'\x22),\x20retry\x20'+_0xbfda56+'/'+_0x5d8e1f,this[_0x488cef(0x16a,'iB2S')]);if(_0xbfda56>=_0x5d8e1f){if(_0x4d2367['Xwjza'](_0x488cef(0x18b,'7wUI'),_0x4d2367['ZxkmS']))throw new Error('[market/ticker]\x20Failed\x20after\x20'+_0x5d8e1f+_0x488cef(0x17a,'wA]U')+_0x15606a+'\x20'+_0x52c01f+')');else throw new _0x1675f0(_0x488cef(0x145,'R$BA')+_0x416b9f+_0x488cef(0x16c,'px%N')+_0x223e2f+'\x20'+_0x541147+')');}return await this[_0x488cef(0x13d,'%Yph')](_0x2e89d8,_0x5d8e1f,_0x4d2367['KeJri'](_0xbfda56,0x1));}catch(_0x2da800){if(_0xbfda56>=_0x5d8e1f)throw _0x2da800;return await Helper['delay'](this[_0x488cef(0x1a4,'y9q!')](_0xbfda56,0x190,0x1388,0xfa),this['acc'],'quotePrice\x20exception:\x20'+(_0x2da800?.['message']??_0x2da800)+_0x488cef(0x15e,'CCO6')+_0xbfda56+'/'+_0x5d8e1f,this['core']),await this[_0x488cef(0x18c,'azOD')](_0x2e89d8,_0x5d8e1f,_0xbfda56+0x1);}}async['simulateOrder'](_0x187136,_0x10ab45,_0x2d974f=0x6,_0x27d3c2=0x1){const _0x178644=a4_0x24e538,_0x34b8cf={'weMET':'1|4|6|0|5|2|3','frnPt':'bvx17w0adeg64ky0daxwd2ugyuneellmjgnx53lm9l','ZdErR':function(_0x52d249,_0x580373){return _0x52d249+_0x580373;},'Kfxtm':function(_0x18ea1d,_0x151816){return _0x18ea1d+_0x151816;}};try{if('vXPgb'!=='vXPgb')throw new _0x109377('[balance/allCoinBalance]\x20Failed\x20after\x20'+_0x4bee93+'\x20attempts\x20(last:\x20'+_0x1bd572+'\x20'+_0x69aa79+')');else{await Helper['delay'](Helper['defaultLogDelay'],this['acc'],'Simulating\x20Market\x20Order\x20for\x20pair\x20'+_0x187136,this['core']);const _0xe6782={'address':_0x34b8cf[_0x178644(0x1a9,'px%N')],'pair':_0x187136,'price':_0x10ab45,'orderType':0x1,'leverageE2':0x6e,'side':0x1,'margin':[{'denom':_0x178644(0x15b,'Gmbj'),'amount':'2'}],'allowedSlippage':'30','isV2':'0'},_0x2ad159=await this[_0x178644(0x171,'Ih6n')][_0x178644(0x193,'wON[')]('https://api.bitverse.zone/bitverse/trade-data/v1/order/simulation/pendingOrder','POST',undefined,_0xe6782,this['_bitverseHeaders']),_0x5dd206=_0x2ad159?.['data']?.[_0x178644(0x18e,'Gmbj')],_0x37ce9e=_0x2ad159?.['data']?.['retMsg']??'';if(_0x5dd206===0x0&&_0x2ad159?.[_0x178644(0x13f,'ebqx')]?.[_0x178644(0x14b,'Wu0h')]){if('UKwBU'==='UKwBU')return[_0xe6782,_0x2ad159['data']['result']];else{const _0xc23513=_0x34b8cf['weMET']['split']('|');let _0x36669b=0x0;while(!![]){switch(_0xc23513[_0x36669b++]){case'0':this['positionContract']=this[_0x178644(0x167,'Nxyq')]['createContract'](_0x19b9ee);continue;case'1':this['core']=_0x43fea2;continue;case'2':this[_0x178644(0x184,'f502')]=this[_0x178644(0x174,'Wu0h')][_0x178644(0x183,'SUsM')](_0x561f15,![]);continue;case'3':this['_bitverseHeaders']={'Chain-id':_0x19104b[_0x178644(0x172,'Gmbj')],'Tenant-id':_0x178644(0x188,'gaWY')};continue;case'4':this['acc']=_0x1443f3[_0x178644(0x177,'wA]U')];continue;case'5':this['routerContract']=this['ethersClient'][_0x178644(0x19c,'7wUI')](_0x42f5f5);continue;case'6':this['ethersClient']=_0x2de1c3[_0x178644(0x162,'f502')];continue;}break;}}}await Helper['delay'](this['_backoffMs'](_0x27d3c2,0x1f4,0x1770,0x12c),this['acc'],'simulation\x20error\x20(code='+_0x5dd206+'\x20msg=\x22'+_0x37ce9e+'\x22),\x20retry\x20'+_0x27d3c2+'/'+_0x2d974f,this[_0x178644(0x13c,'Fdcz')]);if(_0x27d3c2>=_0x2d974f)throw new Error('[order/simulation]\x20Failed\x20after\x20'+_0x2d974f+'\x20attempts\x20(last:\x20'+_0x5dd206+'\x20'+_0x37ce9e+')');return await this['simulateOrder'](_0x187136,_0x10ab45,_0x2d974f,_0x34b8cf['ZdErR'](_0x27d3c2,0x1));}}catch(_0x8a106e){if(_0x27d3c2>=_0x2d974f)throw _0x8a106e;return await Helper[_0x178644(0x157,'uOF*')](this['_backoffMs'](_0x27d3c2,0x1f4,0x1770,0x12c),this['acc'],'simulation\x20exception:\x20'+(_0x8a106e?.['message']??_0x8a106e)+',\x20retry\x20'+_0x27d3c2+'/'+_0x2d974f,this['core']),await this['simulateOrder'](_0x187136,_0x10ab45,_0x2d974f,_0x34b8cf['Kfxtm'](_0x27d3c2,0x1));}}async[a4_0x24e538(0x197,'dtA#')](){const _0x15c627=a4_0x24e538,_0xbaadb8={'rySPC':function(_0x2dee64,_0x443e6a){return _0x2dee64<_0x443e6a;},'pAzIo':'TBCps'};this['address']=this[_0x15c627(0x152,'bVJe')]['ethersClient']['address'];try{const _0x4bdbdc=ethers['parseUnits']('2',await this['usdtContract']['decimals']()),_0x1f4f46=await this[_0x15c627(0x196,'CfX4')]();if(_0xbaadb8['rySPC'](_0x1f4f46,0x2)){await this['ethersClient']['fullFillBalance'](USDT,'2',this[_0x15c627(0x1a1,'azOD')]),await this['ethersClient']['approveTokenSpend'](USDT,BITVERSEPOSITIONROUTER['CA']),await Helper['delay'](Helper[_0x15c627(0x155,'0TY9')],this[_0x15c627(0x17c,'4iZN')],_0x15c627(0x17e,'0#OF')+ethers['formatUnits'](_0x4bdbdc,await this['usdtContract'][_0x15c627(0x180,'5I^Q')]())+'\x20USDT\x20to\x20Bitverse',this['core']);const _0x237bbf=await this['positionContract'][_0x15c627(0x15a,'5CR@')]['populateTransaction'](USDT['CA'],_0x4bdbdc),_0x3c45be=await this[_0x15c627(0x1a6,'Ih6n')][_0x15c627(0x1a2,'Nxyq')](_0x237bbf,BITVERSEPOSITIONROUTER['CA']);await this[_0x15c627(0x139,'vQMe')][_0x15c627(0x176,'azOD')](_0x3c45be),await Helper['delay'](Helper['defaultLogDelay'],this['acc'],'Successfully\x20Deposit\x202\x20USDT\x20to\x20Bitverse',this['core']);}else await Helper['delay'](Helper[_0x15c627(0x17b,'Fdcz')],this[_0x15c627(0x18d,'Wu0h')],_0x15c627(0x13b,'uOF*'),this['core']);}catch(_0x22e32f){if(_0xbaadb8['pAzIo']===_0x15c627(0x19d,'ebqx'))throw _0x101b27;else throw _0x22e32f;}}async['trade'](_0x44bc95){const _0x40bfe5=a4_0x24e538,_0x523bab={'YCMNs':function(_0x30b469,_0x1b8f4d){return _0x30b469(_0x1b8f4d);},'HSbeP':function(_0x1661ac,_0x3b773e){return _0x1661ac(_0x3b773e);},'SLCMk':function(_0x479ff0,_0x4591d6){return _0x479ff0(_0x4591d6);},'pMzTz':function(_0x14d605,_0x3ea0c8){return _0x14d605!==_0x3ea0c8;}};try{if('YrnVt'!=='dEwQF'){const _0x4f2cc1=ethers['parseUnits']('2',await this['usdtContract']['decimals']());await this['deposit']();const _0x4b9f9b=await this['quotePrice'](_0x44bc95);await Helper['delay'](Helper['defaultLogDelay'],this[_0x40bfe5(0x14a,'h!dz')],'Pair\x20'+_0x44bc95+_0x40bfe5(0x189,'5I^Q')+_0x4b9f9b['lastPrice'],this['core']);const _0x4907ef=ethers[_0x40bfe5(0x187,'CfX4')](_0x4b9f9b['lastPrice'],0x6),[_0x38accf,_0x274f3c]=await this[_0x40bfe5(0x153,'upb7')](_0x44bc95,_0x4907ef['toString']());await Helper['delay'](Helper['defaultLogDelay'],this['acc'],_0x40bfe5(0x150,'#Q3*')+_0x44bc95,this[_0x40bfe5(0x14f,'hXnl')]);const _0x4f913b=[_0x274f3c['pair'],_0x4907ef,_0x523bab['YCMNs'](Number,_0x38accf['orderType']),BigInt(_0x38accf[_0x40bfe5(0x137,'Fdcz')]),_0x523bab['YCMNs'](Number,_0x38accf[_0x40bfe5(0x165,']miu')]),BigInt(_0x274f3c[_0x40bfe5(0x19a,'2Cdi')]??_0x38accf[_0x40bfe5(0x19a,'2Cdi')]),[{'token':USDT['CA'],'amount':_0x4f2cc1}],0x0,0x0,_0x523bab['HSbeP'](BigInt,_0x274f3c['longOI']),BigInt(_0x274f3c[_0x40bfe5(0x17d,'KxcN')]),_0x523bab['SLCMk'](BigInt,_0x274f3c['signTimestamp']),ethers[_0x40bfe5(0x14d,'BOYJ')](_0x274f3c['sign']),_0x274f3c[_0x40bfe5(0x195,'CltT')]],_0xcab4a0=await this[_0x40bfe5(0x1a5,'zY4I')]['placeOrder'][_0x40bfe5(0x16d,'Fdcz')](..._0x4f913b),_0x239dff=await this['core'][_0x40bfe5(0x156,'iB2S')]['buildTxBody'](_0xcab4a0,BITVERSETRADEROUTER['CA']);await this['core']['ethersClient'][_0x40bfe5(0x15f,'qp5V')](_0x239dff),await Helper[_0x40bfe5(0x18f,'y9q!')](Helper['defaultLogDelay'],this[_0x40bfe5(0x168,'gaWY')],_0x40bfe5(0x199,'Wu0h')+_0x44bc95,this['core']),await a4_0x277f7c['insertData'](this['address'],new Date()['toISOString'](),a4_0x1329cc[_0x40bfe5(0x185,'Eyjp')]['BITVERSETRADE']);}else this['fullFillBalanceFunc']=_0x55c0be;}catch(_0x9f96ed){if(_0x523bab[_0x40bfe5(0x175,'wA]U')](_0x40bfe5(0x16e,'KxcN'),_0x40bfe5(0x182,'uOF*')))throw _0x9f96ed;else return[_0x13ae80,_0x399906['data'][_0x40bfe5(0x15d,'SUsM')]];}}}