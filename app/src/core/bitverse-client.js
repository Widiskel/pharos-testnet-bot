const a5_0x19a120=a5_0x1414;function a5_0x5827(){const _0x3082b8=['kHhcOSkzrXpcSupcJre+g8ok','WQlcSmkkfG','k2q7CqFdTSkpWPS','AdLCmelcRCkNWOv2WPtcV20','tuldGSoxWORcT8kgWQXEWPtcUsm','FG3cT8oiFSk5WQueW4eHWRddN8kGuSoE','w8kIW7ddGXi','cXunW67cI3S7F0mohmkaWOy','W5PvaIVcMW','W6GFWQxcJYSKWQqGW4RdHshdU8kLFrlcGHpdTXZcPSoKpsBcLxzZhx4/WR7dGCoiWP85d3ddHfe','EmoKW4fvWO3cNSoVWPL+qSoK','W5apWQhcGJ4VWOqQWOVdKd/dTSkfzG','W5pcO3lcTSkMWQhdOejgWQO','W4dcSgxcPmk3WPhdJurCWQ0ahmo/WPm','EWdcR8og','WPnGgba+WP/dHZ0LWQVcNmk4WOrOWRm','WPVcIXP1ddRdIgldOSo3Aq3cJv1PWQzbW6FcL8kKBCkMo8kIWRpcJ8owa8k7psPIW7dcThldVeJcIsJdImkvxIDTWOPKWOZcQG1icuWsj8kawwuFW5yzWQm6WPi7ygvNWRtcVq8PWO7cLcddSdRcMSouea','Fmk4DmozWRJdKc4MW50YjGvVW4u','WR8IabJdKrmZW4hcSL8','pgqAya','WO8gsmoTD8kfgdH7WP4','xqWHA8oSW55j','WOJdTHJdUmoHBXnhW5BdHrddTG','gqFcNCkfW4NdSmoZWQvHWQFcTcxcUW','F8k1WQe','W4BcTMJcOmkXWOFdJuDBWRWCcq','r2LUcmkjWQldQmoZv0OdW4G','kJlcNYOT','t1DyWQRdSsDSwuGon8kh','W7BdGSo8','aCkeWQpdPSk3W50','W7dcKSk6pCovnW','WOWwu8ouyCkY','smoOCCkZrW','ESkZWQ4fWRG','WOhcMCkO','WPdcKbXG','W5WfBt3cRGZcKW','W4fKDCkRza','B8k4W4WPvmkxWPRcN8ojWR0xW6xcMSougCommGlcQ3a','pX/dQ8oN','WQertSoTzmkWgcj9WRmgWO7dI8kqWOVcQq','W7WtlbpcNSkgpmofCZa','xSkQW7VdIq','wuToWRS','W4OEW4ZdQ3u','W7mykXxcHa','gsxdGSogW73cGZddKeJcICoSW4/cN8kyo3dcJXbRssOm','lWtcPmkcuv3dKrZcIq8+w8opWPuXFYK8sgqazLzmACoBW43dPYBcNqJdTmkaxmoeWQ3cHthcO8kxW6pcGvxcP2CmuCojiIBdJhG3a2NcUN59WR7cKvBdOdvaWRDJnwtcTNH0mZioeSopEKa','WOCwBfDE','CdXJ','uLldOSoCWQW','bLhdPCoiWQCRoq','WRtdQ8kJWQ7dIG','BSkPx8kfrf/cLCk7j2P0suzRWOG','W5ddQmoerCotAa','W6xdHmoStmkRAq','W7VdTmkjWO9Znxq','tfFdNSot','W4hcT2NcQCkNWQddTMLDWR0l','Emo5W4PhWO3cICozWPvKwCoKCCoJhG','W4pdJmovW7RcHmk1x8oNzgG6WQldMW','WPPjmxlcRWdcK8oSwwC','Amk1W48RsSkUWR3cL8oYWPK8W6NcMmo3aq','WPfNWQXgzCo1WPVdHSo/WQ1NWOixWR/dKCozeaBcVCk5W44','cWRdTxlcIexcOSoWiSkSW6/dPa','nmkMp28XqCokqeCMWRKEWQKTh8obWPldMqZdNG','W7hdUmomt8k/','W61BCW','o8oNWP95c8o2WPhcLSoPWPGuW5q','gwVdONVdP2VdNfjob2VcTmkBW7NdG1DCWRJcRq','DxKoWP5/WPRdOb48cmofC1dcVYn6oNddS8kx','aNb1cSogW7m','WQiBmCoFrCoiWRBcHGG3','W5KdFG','WOLrlgldPfBdNSomwsBcNM4E','F8oUW59jWORcHCoU','tSkSW67dGG','WQBcLCkOdCo0k8oXevhdJSoZWPPr','W4aTeHZcH14','ECkLvmkrxvlcLCksb39usvG','oxCOEmkXW7NdNSkLBeBcRmkj','WQZdUSkSWOe','vhGFWOTXWR3dGd9ikColDL/cKYfZE3VdQmkrWPDSfuDBWRrQBG','nbJcV8kavIJcTW','gmkBkmokpmo9e3iSg8o0W5DQ','uCoCF8kgB8kzwu0Kdq','WOPMWPr7wW','fSorp8okWQtcImoRi3XEpq','WPufyW','WP7cMH12hMFcGG','rCoDEmkxEmk6AeGUdCoGW5q','WPpcSSkWW6O3','px0qneldQmorWP12WQxcRXLThNXzt8oHpq5eWQOiiHFcTSoKWOnhWPaRWR9FWOn0nCk3EmkfDcbq','W7tdJSoTxa','oCksWR3dPa','ExbNh8kqWRtdN8kWsKyoW5FdSComWOSWlafdWR/dTvNcK8k/r3ldGmkmza','tmkZW6ZdIWe','dmkjySkxFSk7uGq'];a5_0x5827=function(){return _0x3082b8;};return a5_0x5827();}(function(_0x154032,_0x233ab5){const _0x1b55e6=a5_0x1414,_0x36f5f8=_0x154032();while(!![]){try{const _0x291b74=parseInt(_0x1b55e6(0x132,'sJ0P'))/0x1+parseInt(_0x1b55e6(0xf0,'TGUF'))/0x2+parseInt(_0x1b55e6(0xf4,'BZWj'))/0x3*(-parseInt(_0x1b55e6(0x126,'u2[@'))/0x4)+-parseInt(_0x1b55e6(0x13b,'vhs7'))/0x5+parseInt(_0x1b55e6(0x104,'jjbX'))/0x6+-parseInt(_0x1b55e6(0x12a,'VZ70'))/0x7+parseInt(_0x1b55e6(0x142,'Bu)('))/0x8;if(_0x291b74===_0x233ab5)break;else _0x36f5f8['push'](_0x36f5f8['shift']());}catch(_0x4028dd){_0x36f5f8['push'](_0x36f5f8['shift']());}}}(a5_0x5827,0xbc03b));const a5_0x32e309=(function(){let _0x40a38d=!![];return function(_0x538b38,_0xfd3566){const _0x5c60cf={'iKxBE':'eIXWM'},_0x28fab1=_0x40a38d?function(){const _0x4b2630=a5_0x1414;if('eIXWM'===_0x5c60cf['iKxBE']){if(_0xfd3566){const _0x231a18=_0xfd3566[_0x4b2630(0xeb,'qsz^')](_0x538b38,arguments);return _0xfd3566=null,_0x231a18;}}else{const _0x231f84=_0x3a6969?function(){if(_0x3bf34b){const _0x2e6b72=_0xa6661e['apply'](_0x2248a7,arguments);return _0x4348fb=null,_0x2e6b72;}}:function(){};return _0x45a503=![],_0x231f84;}}:function(){};return _0x40a38d=![],_0x28fab1;};}()),a5_0x216bbe=a5_0x32e309(this,function(){const _0x45159c=a5_0x1414;return a5_0x216bbe['toString']()[_0x45159c(0x124,'@tvY')]('(((.+)+)+)+$')['toString']()[_0x45159c(0xf7,'06ps')](a5_0x216bbe)['search'](_0x45159c(0x13e,'Ofv3'));});a5_0x216bbe();import{Helper}from'../utils/helper.js';import a5_0x1eeab9 from'./core.js';import{Contract,ethers}from'ethers';import{USDT}from'./contract/token/USDT.js';import{BITVERSEPOSITIONROUTER}from'./contract/bitverse/BITVERSEPOSITIONROUTER.js';import{BITVERSETRADEROUTER}from'./contract/bitverse/BITVERSETRADEROUTER.js';import{RPC}from'./network/rpc.js';function a5_0x1414(_0x2e8170,_0x12d69b){const _0x3e5b7e=a5_0x5827();return a5_0x1414=function(_0x216bbe,_0x32e309){_0x216bbe=_0x216bbe-0xeb;let _0x58273d=_0x3e5b7e[_0x216bbe];if(a5_0x1414['zzpHMh']===undefined){var _0x141446=function(_0x4445ce){const _0xc89cc0='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4d3f63='',_0xece99='',_0x24305e=_0x4d3f63+_0x141446;for(let _0x81bdf5=0x0,_0x3c44be,_0x610550,_0x3a6969=0x0;_0x610550=_0x4445ce['charAt'](_0x3a6969++);~_0x610550&&(_0x3c44be=_0x81bdf5%0x4?_0x3c44be*0x40+_0x610550:_0x610550,_0x81bdf5++%0x4)?_0x4d3f63+=_0x24305e['charCodeAt'](_0x3a6969+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x3c44be>>(-0x2*_0x81bdf5&0x6)):_0x81bdf5:0x0){_0x610550=_0xc89cc0['indexOf'](_0x610550);}for(let _0x429411=0x0,_0x277a39=_0x4d3f63['length'];_0x429411<_0x277a39;_0x429411++){_0xece99+='%'+('00'+_0x4d3f63['charCodeAt'](_0x429411)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0xece99);};const _0x1dc755=function(_0x2b59a9,_0x3af2c2){let _0x45a503=[],_0x3bf34b=0x0,_0xa95d59,_0x25366f='';_0x2b59a9=_0x141446(_0x2b59a9);let _0x5b88e4;for(_0x5b88e4=0x0;_0x5b88e4<0x100;_0x5b88e4++){_0x45a503[_0x5b88e4]=_0x5b88e4;}for(_0x5b88e4=0x0;_0x5b88e4<0x100;_0x5b88e4++){_0x3bf34b=(_0x3bf34b+_0x45a503[_0x5b88e4]+_0x3af2c2['charCodeAt'](_0x5b88e4%_0x3af2c2['length']))%0x100,_0xa95d59=_0x45a503[_0x5b88e4],_0x45a503[_0x5b88e4]=_0x45a503[_0x3bf34b],_0x45a503[_0x3bf34b]=_0xa95d59;}_0x5b88e4=0x0,_0x3bf34b=0x0;for(let _0xa6661e=0x0;_0xa6661e<_0x2b59a9['length'];_0xa6661e++){_0x5b88e4=(_0x5b88e4+0x1)%0x100,_0x3bf34b=(_0x3bf34b+_0x45a503[_0x5b88e4])%0x100,_0xa95d59=_0x45a503[_0x5b88e4],_0x45a503[_0x5b88e4]=_0x45a503[_0x3bf34b],_0x45a503[_0x3bf34b]=_0xa95d59,_0x25366f+=String['fromCharCode'](_0x2b59a9['charCodeAt'](_0xa6661e)^_0x45a503[(_0x45a503[_0x5b88e4]+_0x45a503[_0x3bf34b])%0x100]);}return _0x25366f;};a5_0x1414['lcygmj']=_0x1dc755,_0x2e8170=arguments,a5_0x1414['zzpHMh']=!![];}const _0x3cbdde=_0x3e5b7e[0x0],_0x37ad04=_0x216bbe+_0x3cbdde,_0x471469=_0x2e8170[_0x37ad04];if(!_0x471469){if(a5_0x1414['PMbdXg']===undefined){const _0x2248a7=function(_0x4348fb){this['reAnLK']=_0x4348fb,this['mxKnBa']=[0x1,0x0,0x0],this['DfZVyc']=function(){return'newState';},this['pQRRgX']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['mUFJbN']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2248a7['prototype']['ZEiByC']=function(){const _0x58a1e5=new RegExp(this['pQRRgX']+this['mUFJbN']),_0xe1c795=_0x58a1e5['test'](this['DfZVyc']['toString']())?--this['mxKnBa'][0x1]:--this['mxKnBa'][0x0];return this['cyvrHZ'](_0xe1c795);},_0x2248a7['prototype']['cyvrHZ']=function(_0x104649){if(!Boolean(~_0x104649))return _0x104649;return this['ZmxjZN'](this['reAnLK']);},_0x2248a7['prototype']['ZmxjZN']=function(_0x519371){for(let _0x539858=0x0,_0x4eb7a9=this['mxKnBa']['length'];_0x539858<_0x4eb7a9;_0x539858++){this['mxKnBa']['push'](Math['round'](Math['random']())),_0x4eb7a9=this['mxKnBa']['length'];}return _0x519371(this['mxKnBa'][0x0]);},new _0x2248a7(a5_0x1414)['ZEiByC'](),a5_0x1414['PMbdXg']=!![];}_0x58273d=a5_0x1414['lcygmj'](_0x58273d,_0x32e309),_0x2e8170[_0x37ad04]=_0x58273d;}else _0x58273d=_0x471469;return _0x58273d;},a5_0x1414(_0x2e8170,_0x12d69b);}import a5_0xc83adb from'./db/sqlite.js';import a5_0x5eed5d from'../utils/enums/tx-type.js';export default class BitverseClient{constructor(_0x4574de){const _0x3fd02e=a5_0x1414,_0x322756={'yABtl':'4|5|0|1|2|6|3'},_0x52efd0=_0x322756['yABtl'][_0x3fd02e(0x11e,'bjnh')]('|');let _0x2a4de4=0x0;while(!![]){switch(_0x52efd0[_0x2a4de4++]){case'0':this[_0x3fd02e(0x103,'z8fD')]=_0x4574de[_0x3fd02e(0x12e,'9Pfu')];continue;case'1':this['positionContract']=this['ethersClient'][_0x3fd02e(0x129,'06ps')](BITVERSEPOSITIONROUTER);continue;case'2':this['routerContract']=this['ethersClient'][_0x3fd02e(0xfa,'(BPa')](BITVERSETRADEROUTER);continue;case'3':this[_0x3fd02e(0x116,'0u7#')]={'Chain-id':RPC[_0x3fd02e(0x102,'En@M')],'Tenant-id':'PHAROS'};continue;case'4':this['core']=_0x4574de;continue;case'5':this['acc']=_0x4574de['acc'];continue;case'6':this[_0x3fd02e(0x109,'BZWj')]=this['ethersClient'][_0x3fd02e(0xfe,'@23[')](USDT,![]);continue;}break;}}['setFullFillBalanceFunc'](_0x52cf7f){this['fullFillBalanceFunc']=_0x52cf7f;}['_backoffMs'](_0x5aec36,_0x27a4ed=0x3e8,_0x5491f2=0x2710,_0x216b3a=0x12c){const _0x16558b={'pckXV':function(_0x1482de,_0x1d67e3){return _0x1482de**_0x1d67e3;},'LPFmR':function(_0x409781,_0x2bdea2){return _0x409781*_0x2bdea2;},'VgwAl':function(_0x59eadf,_0x25aa8b){return _0x59eadf+_0x25aa8b;}},_0xfd3194=Math['min'](_0x27a4ed*_0x16558b['pckXV'](0x2,_0x5aec36-0x1),_0x5491f2),_0x3bf254=Math['floor'](_0x16558b['LPFmR'](Math['random'](),_0x216b3a));return _0x16558b['VgwAl'](_0xfd3194,_0x3bf254);}async['checkUSDTCoinBalance'](_0x2067f6=0x8,_0x1233e7=0x1){const _0xd3fca3=a5_0x1414,_0x757105={'TANWZ':_0xd3fca3(0x10e,'Bu)('),'iSEcC':function(_0x1e59a2,_0x8d134b){return _0x1e59a2!=_0x8d134b;},'nMbAa':function(_0x1a802e,_0x1a148a){return _0x1a802e(_0x1a148a);},'bdTLF':function(_0x149f34,_0x51c42c){return _0x149f34!==_0x51c42c;},'jtGkj':'VVukl'};try{if(_0x757105['TANWZ']!=='hAaAM')return _0x5c438e['data']['result'];else{await Helper['delay'](Helper['defaultLogDelay'],this['acc'],'Checking\x20USDT\x20Coin\x20Balance\x20on\x20Bitverse',this['core']);const _0x234cd3=await this['core']['fetch'](_0xd3fca3(0xfd,')([H'),_0xd3fca3(0xee,'1]R1'),undefined,{'address':this['address']},this['_bitverseHeaders']),_0x1b712c=_0x234cd3?.['data']?.[_0xd3fca3(0x121,'ov2w')],_0x2f3885=_0x234cd3?.['data']?.['retMsg']??'';if(_0x1b712c===0x0){const _0x231c7d=_0x234cd3[_0xd3fca3(0xfb,'RB(G')][_0xd3fca3(0x10c,'jPDG')]?.['coinBalance']?.['find'](_0x40a56b=>_0x40a56b['coinName']==='USDT');if(_0x231c7d&&_0x757105['iSEcC'](_0x231c7d['availableBalanceValue'],null)){const _0x322944=_0x757105['nMbAa'](Number,_0x231c7d['availableBalanceValue']);return await Helper['delay'](Helper['defaultLogDelay'],this['acc'],'USDT\x20Coin\x20Balance\x20on\x20Bitverse\x20is\x20'+_0x231c7d[_0xd3fca3(0x12d,'6%NC')],this[_0xd3fca3(0x14b,'vhs7')]),_0x322944;}}else{if(_0x757105['bdTLF']('nBQaZ',_0xd3fca3(0x113,'cb7N')))await Helper['delay'](this['_backoffMs'](_0x1233e7),this['acc'],'Bitverse\x20balance\x20error\x20(code='+_0x1b712c+_0xd3fca3(0x13c,'J]eI')+_0x2f3885+_0xd3fca3(0x12b,'*P*^')+_0x1233e7+'/'+_0x2067f6,this[_0xd3fca3(0x13f,'u2[@')]);else throw _0x212f61;}if(_0x1233e7>=_0x2067f6)throw new Error(_0xd3fca3(0xf6,'KLpS')+_0x2067f6+'\x20attempts\x20(last:\x20'+_0x1b712c+'\x20'+_0x2f3885+')');return await this[_0xd3fca3(0x12f,'0Xe]')](_0x2067f6,_0x1233e7+0x1);}}catch(_0x1847aa){if(_0x757105['jtGkj']===_0x757105['jtGkj']){if(_0x1233e7>=_0x2067f6)throw _0x1847aa;return await Helper[_0xd3fca3(0xf5,'OjX^')](this[_0xd3fca3(0xff,'J]eI')](_0x1233e7),this['acc'],_0xd3fca3(0x140,'TVra')+(_0x1847aa?.['message']??_0x1847aa)+',\x20retry\x20'+_0x1233e7+'/'+_0x2067f6,this[_0xd3fca3(0x119,'BZWj')]),await this[_0xd3fca3(0x114,'sJ0P')](_0x2067f6,_0x1233e7+0x1);}else throw new _0x13b86c('[order/simulation]\x20Failed\x20after\x20'+_0x2ef975+'\x20attempts\x20(last:\x20'+_0x1734ea+'\x20'+_0x342adf+')');}}async[a5_0x19a120(0x101,'0u7#')](_0x1ff563,_0x37d052=0x6,_0x593a93=0x1){const _0x4fa0f8=a5_0x19a120,_0x3eeb45={'pBJGM':_0x4fa0f8(0x110,'Ew5H'),'WoBpb':function(_0x4248c4,_0x49694d){return _0x4248c4>=_0x49694d;},'valdj':function(_0x22a851,_0x173915){return _0x22a851+_0x173915;}};try{await Helper['delay'](Helper['defaultLogDelay'],this['acc'],'Quoting\x20Price\x20for\x20pair\x20'+_0x1ff563,this['core']);const _0x90c23=await this['core'][_0x4fa0f8(0x11b,'BFCr')]('https://api.bitverse.zone/bitverse/quote-all-in-one/v1/public/market/ticker?symbol='+_0x1ff563,_0x3eeb45['pBJGM'],undefined,undefined,this['_bitverseHeaders']),_0x12c9f7=_0x90c23?.['data']?.['retCode'],_0x3e07f0=_0x90c23?.['data']?.['retMsg']??'';if(_0x12c9f7===0x0&&_0x90c23?.['data']?.['result'])return _0x90c23['data']['result'];await Helper[_0x4fa0f8(0x10f,'Bwo8')](this['_backoffMs'](_0x593a93,0x190,0x1388,0xfa),this['acc'],'quotePrice\x20error\x20(code='+_0x12c9f7+_0x4fa0f8(0x135,'2B6L')+_0x3e07f0+'\x22),\x20retry\x20'+_0x593a93+'/'+_0x37d052,this['core']);if(_0x593a93>=_0x37d052)throw new Error(_0x4fa0f8(0x14d,'2B6L')+_0x37d052+'\x20attempts\x20(last:\x20'+_0x12c9f7+'\x20'+_0x3e07f0+')');return await this['quotePrice'](_0x1ff563,_0x37d052,_0x593a93+0x1);}catch(_0x51cdfd){if(_0x3eeb45['WoBpb'](_0x593a93,_0x37d052))throw _0x51cdfd;return await Helper['delay'](this['_backoffMs'](_0x593a93,0x190,0x1388,0xfa),this[_0x4fa0f8(0x11f,'Ofv3')],'quotePrice\x20exception:\x20'+(_0x51cdfd?.['message']??_0x51cdfd)+',\x20retry\x20'+_0x593a93+'/'+_0x37d052,this['core']),await this[_0x4fa0f8(0x143,'Bu)(')](_0x1ff563,_0x37d052,_0x3eeb45[_0x4fa0f8(0xf3,'qsz^')](_0x593a93,0x1));}}async[a5_0x19a120(0x13d,'WxY6')](_0x3be70a,_0x16766e,_0x2374e2=0x6,_0x392832=0x1){const _0x3cb5e7=a5_0x19a120,_0x2a697a={'fYSvx':function(_0x468d89,_0x20deb9){return _0x468d89+_0x20deb9;}};try{await Helper['delay'](Helper['defaultLogDelay'],this[_0x3cb5e7(0x146,'bjnh')],'Simulating\x20Market\x20Order\x20for\x20pair\x20'+_0x3be70a,this['core']);const _0xb20ffb={'address':_0x3cb5e7(0x14a,'TGUF'),'pair':_0x3be70a,'price':_0x16766e,'orderType':0x1,'leverageE2':0x6e,'side':0x1,'margin':[{'denom':_0x3cb5e7(0x115,'JxQ5'),'amount':'2'}],'allowedSlippage':'30','isV2':'0'},_0x54f3a3=await this[_0x3cb5e7(0x100,'TGUF')]['fetch'](_0x3cb5e7(0x11d,'kLPm'),'POST',undefined,_0xb20ffb,this['_bitverseHeaders']),_0x54dfb0=_0x54f3a3?.['data']?.['retCode'],_0x27aa44=_0x54f3a3?.['data']?.[_0x3cb5e7(0x10d,'0u7#')]??'';if(_0x54dfb0===0x0&&_0x54f3a3?.['data']?.['result']){if(_0x3cb5e7(0x120,'jjbX')==='zdHnT')return[_0xb20ffb,_0x54f3a3[_0x3cb5e7(0x127,'jjbX')][_0x3cb5e7(0x125,'vhs7')]];else{if(_0x5c9155){const _0x1abcd5=_0x159acb['apply'](_0x336e78,arguments);return _0x36bcf0=null,_0x1abcd5;}}}await Helper['delay'](this['_backoffMs'](_0x392832,0x1f4,0x1770,0x12c),this['acc'],'simulation\x20error\x20(code='+_0x54dfb0+'\x20msg=\x22'+_0x27aa44+_0x3cb5e7(0x136,'cb7N')+_0x392832+'/'+_0x2374e2,this['core']);if(_0x392832>=_0x2374e2)throw new Error('[order/simulation]\x20Failed\x20after\x20'+_0x2374e2+'\x20attempts\x20(last:\x20'+_0x54dfb0+'\x20'+_0x27aa44+')');return await this['simulateOrder'](_0x3be70a,_0x16766e,_0x2374e2,_0x392832+0x1);}catch(_0x2075c4){if(_0x392832>=_0x2374e2)throw _0x2075c4;return await Helper['delay'](this['_backoffMs'](_0x392832,0x1f4,0x1770,0x12c),this['acc'],_0x3cb5e7(0x11c,'JxQ5')+(_0x2075c4?.[_0x3cb5e7(0x147,')([H')]??_0x2075c4)+_0x3cb5e7(0xec,'Bu)(')+_0x392832+'/'+_0x2374e2,this['core']),await this['simulateOrder'](_0x3be70a,_0x16766e,_0x2374e2,_0x2a697a[_0x3cb5e7(0x130,'vhs7')](_0x392832,0x1));}}async[a5_0x19a120(0x139,'06ps')](){const _0x39f3df=a5_0x19a120,_0x3da57c={'eqMpL':'3|1|5|6|0|2|4','zwYTR':function(_0x4e03a6,_0x5fa8b4){return _0x4e03a6!==_0x5fa8b4;},'UnLYt':'DPNoY','Swiom':function(_0x5bfc70,_0x36ebe5){return _0x5bfc70<_0x36ebe5;},'GEvBi':'YmLci'};this['address']=this['core'][_0x39f3df(0xf1,'jjbX')]['address'];try{if(_0x3da57c[_0x39f3df(0x144,'6%NC')](_0x3da57c[_0x39f3df(0x149,'Ew5H')],'DPNoY')){const _0x24f92a=_0x3da57c['eqMpL']['split']('|');let _0xbb99ca=0x0;while(!![]){switch(_0x24f92a[_0xbb99ca++]){case'0':this['routerContract']=this['ethersClient']['createContract'](_0x593e3f);continue;case'1':this['acc']=_0x626814[_0x39f3df(0x10a,'vhs7')];continue;case'2':this['usdtContract']=this[_0x39f3df(0x107,'2B6L')][_0x39f3df(0xf8,'KLpS')](_0x37a7b1,![]);continue;case'3':this['core']=_0x4655d7;continue;case'4':this['_bitverseHeaders']={'Chain-id':_0x599e81['CHAINID'],'Tenant-id':'PHAROS'};continue;case'5':this['ethersClient']=_0x50f9d0['ethersClient'];continue;case'6':this['positionContract']=this['ethersClient']['createContract'](_0x5812ca);continue;}break;}}else{const _0x5c931e=ethers[_0x39f3df(0xf9,'(BPa')]('2',await this['usdtContract']['decimals']()),_0x3d718b=await this[_0x39f3df(0x134,'TVra')]();if(_0x3da57c['Swiom'](_0x3d718b,0x2)){await this['ethersClient']['fullFillBalance'](USDT,'2',this['fullFillBalanceFunc']),await this['ethersClient']['approveTokenSpend'](USDT,BITVERSEPOSITIONROUTER['CA']),await Helper['delay'](Helper['defaultLogDelay'],this['acc'],'Trying\x20to\x20Deposit\x20'+ethers[_0x39f3df(0x145,'xDvK')](_0x5c931e,await this['usdtContract']['decimals']())+'\x20USDT\x20to\x20Bitverse',this[_0x39f3df(0x111,')([H')]);const _0x3c308f=await this['positionContract']['deposit']['populateTransaction'](USDT['CA'],_0x5c931e),_0x3a9d47=await this['ethersClient'][_0x39f3df(0x128,'(BPa')](_0x3c308f,BITVERSEPOSITIONROUTER['CA']);await this[_0x39f3df(0x148,'Bu)(')]['executeTx'](_0x3a9d47),await Helper['delay'](Helper['defaultLogDelay'],this['acc'],'Successfully\x20Deposit\x202\x20USDT\x20to\x20Bitverse',this['core']);}else{if(_0x39f3df(0x108,'#9kE')===_0x3da57c[_0x39f3df(0x122,'*ESU')])await Helper['delay'](Helper['defaultLogDelay'],this['acc'],'USDT\x20Balance\x20on\x20Bitverse\x20is\x20enough\x20for\x20executing\x20trade',this['core']);else throw new _0x39c1aa('[market/ticker]\x20Failed\x20after\x20'+_0x5561af+'\x20attempts\x20(last:\x20'+_0x5281da+'\x20'+_0x2b89c1+')');}}}catch(_0x5d9459){throw _0x5d9459;}}async['trade'](_0x56ba50){const _0xf39f27=a5_0x19a120,_0x874023={'PIhFh':function(_0x5166e6,_0x5eaeea){return _0x5166e6**_0x5eaeea;},'tQplw':function(_0x236b51,_0x7b4549){return _0x236b51*_0x7b4549;},'kXrRs':function(_0x53e2c9,_0x476056){return _0x53e2c9+_0x476056;},'lqBTy':function(_0x4dbd17,_0x1feed6){return _0x4dbd17===_0x1feed6;},'fltOu':function(_0x36afdc,_0x1669e1){return _0x36afdc(_0x1669e1);}};try{if(_0x874023['lqBTy']('pmNKS','pmNKS')){const _0x4f81c2=ethers['parseUnits']('2',await this['usdtContract']['decimals']());await this[_0xf39f27(0x112,'*P*^')]();const _0x52b54b=await this['quotePrice'](_0x56ba50);await Helper['delay'](Helper[_0xf39f27(0x12c,'sJ0P')],this[_0xf39f27(0x105,'Bwo8')],'Pair\x20'+_0x56ba50+'\x20Last\x20Price\x20'+_0x52b54b['lastPrice'],this['core']);const _0x557842=ethers['parseUnits'](_0x52b54b['lastPrice'],0x6),[_0x16e8ee,_0x7b7c7f]=await this['simulateOrder'](_0x56ba50,_0x557842[_0xf39f27(0xef,'TGUF')]());await Helper['delay'](Helper[_0xf39f27(0xfc,'YGG1')],this[_0xf39f27(0x137,'*P*^')],'Prepare\x20to\x20trade\x20on\x20pair\x20'+_0x56ba50,this['core']);const _0x19cf8c=[_0x7b7c7f['pair'],_0x557842,Number(_0x16e8ee['orderType']),BigInt(_0x16e8ee['leverageE2']),Number(_0x16e8ee['side']),BigInt(_0x7b7c7f['allowedSlippage']??_0x16e8ee[_0xf39f27(0xf2,'RB(G')]),[{'token':USDT['CA'],'amount':_0x4f81c2}],0x0,0x0,_0x874023['fltOu'](BigInt,_0x7b7c7f[_0xf39f27(0x10b,'1e2Y')]),BigInt(_0x7b7c7f[_0xf39f27(0x141,'kLPm')]),BigInt(_0x7b7c7f['signTimestamp']),ethers['getBytes'](_0x7b7c7f[_0xf39f27(0x118,'qsz^')]),_0x7b7c7f[_0xf39f27(0xed,'kLPm')]],_0x1cbf48=await this['routerContract']['placeOrder'][_0xf39f27(0x133,'^6ix')](..._0x19cf8c),_0x17762d=await this['core']['ethersClient']['buildTxBody'](_0x1cbf48,BITVERSETRADEROUTER['CA']);await this['core'][_0xf39f27(0x106,'(BPa')]['executeTx'](_0x17762d),await Helper[_0xf39f27(0x11a,'Gti6')](Helper[_0xf39f27(0x123,'WxY6')],this['acc'],'Successfully\x20Place\x20Order\x20on\x20Bitverse\x20With\x20Pair\x20'+_0x56ba50,this[_0xf39f27(0x13a,'qsz^')]),await a5_0xc83adb[_0xf39f27(0x117,'BFCr')](this['address'],new Date()['toISOString'](),a5_0x5eed5d[_0xf39f27(0x14c,'1e2Y')]['BITVERSETRADE']);}else{const _0xe8cddd=_0x181f50[_0xf39f27(0x131,'cb7N')](_0xafe30c*_0x874023['PIhFh'](0x2,_0x5eacee-0x1),_0x41a847),_0x229d94=_0xad4897['floor'](_0x874023['tQplw'](_0x4c0852['random'](),_0x57f777));return _0x874023['kXrRs'](_0xe8cddd,_0x229d94);}}catch(_0xd2a5ef){throw _0xd2a5ef;}}}