const a4_0x31cdee=a4_0x1b5e;(function(_0x4ec770,_0x14ad0e){const _0x4538e5=a4_0x1b5e,_0x550145=_0x4ec770();while(!![]){try{const _0x179baf=-parseInt(_0x4538e5(0x144,'b^LT'))/0x1+parseInt(_0x4538e5(0x191,'5H7$'))/0x2+-parseInt(_0x4538e5(0x15a,'fHXK'))/0x3+parseInt(_0x4538e5(0x160,'pQUz'))/0x4*(parseInt(_0x4538e5(0x157,'H#]O'))/0x5)+-parseInt(_0x4538e5(0x159,'j09X'))/0x6+-parseInt(_0x4538e5(0x1a0,'o7g4'))/0x7*(parseInt(_0x4538e5(0x171,'Su[s'))/0x8)+parseInt(_0x4538e5(0x19d,'2qOu'))/0x9*(parseInt(_0x4538e5(0x195,'nlHd'))/0xa);if(_0x179baf===_0x14ad0e)break;else _0x550145['push'](_0x550145['shift']());}catch(_0x36fd8e){_0x550145['push'](_0x550145['shift']());}}}(a4_0x5e3b,0xd425c));const a4_0x5d19ef=(function(){let _0x33c581=!![];return function(_0x19358e,_0x1ceb60){const _0x162f45={'MzzZN':function(_0x399bac,_0x45c143){return _0x399bac!==_0x45c143;},'TgzHU':'TeFWh'},_0x370188=_0x33c581?function(){const _0x261456=a4_0x1b5e;if(_0x1ceb60){if(_0x162f45['MzzZN']('TeFWh',_0x162f45['TgzHU']))this[_0x261456(0x176,'nlHd')]=_0x477dca;else{const _0xc58019=_0x1ceb60['apply'](_0x19358e,arguments);return _0x1ceb60=null,_0xc58019;}}}:function(){};return _0x33c581=![],_0x370188;};}()),a4_0x48cef1=a4_0x5d19ef(this,function(){const _0x2c68e6=a4_0x1b5e,_0x150e33={'nKUqb':_0x2c68e6(0x19a,'tve^')};return a4_0x48cef1[_0x2c68e6(0x17b,'uCzc')]()['search'](_0x150e33['nKUqb'])['toString']()[_0x2c68e6(0x182,'H#]O')](a4_0x48cef1)['search']('(((.+)+)+)+$');});a4_0x48cef1();import{Helper}from'../utils/helper.js';import a4_0x5a73a8 from'./core.js';import{Contract,ethers}from'ethers';import{USDT}from'./contract/token/USDT.js';function a4_0x5e3b(){const _0x5cb6b6=['j8kCW7v4dSk0vCklkwe','Cg3cJSo1WQFdQmo9W4SbgZDsW7ZdSer8W4dcJK8oW5FdRCkoEWldLdFdN8ke','Bh8UW7WkW4JdT8kVeCkgqCkrrfpcOb91wsdcLSkpxZHxpmoJrmol','WRHWWRmFAGPdW7/dLbdcOmk2WP8','mt7cJ8kWDIVdLvRdHhf3Ca','kSkgzmk9','js7cIa','WRNdQfnasCklWRVcLweT','W6pcJ8koWPVcIa0WW4pcHq/dQeqU','WR1LWRueFeqJWQddKa7cOmo2WPRcMSo2erH5ecCKWPFcT8kyyuRdKLVcVKtdLJBcRfi7WPeWW7tcVmkpW4fzW7jWWQdcTmoCjSk9iZldTsBcT8o4W5BcNCkzbmoHWOpcUG/dNmkpx0TsW77dVwJcKSkZWR8HW4uVxGZdLIfyW5u','WQnuWQLGtWhdI2WyWRaaWOHf','wqJdKXKzWQFdISkTW4Xbq3xcPWaNW5y9WRddRmkpj0CG','BSk7WR4axSoCACo0WPS','cXxcICoLW7eV','lCkDW7r4','v8khkYNdJwm','E8okm8ktWQ1ttvSjCa','FSoZt2jroxZcJ8krW5LSW44','t3u5','WP/cH8orWPy','vSkhpHJdGw8I','W59ZA8k0mq','kdtdLtbSW7jdx8oyWPtdIfaI','WQhdLqnRrmkRvMLdpCoLi8oe','iuFdI8o/WPLL','WONdNCoAW4BdMvbKW6pdJqBdO0qbWPaXW6e1W4BdMblcNb7dJ8oApea0AsRcHmoEWQKoW7GQpmomWRG','fCosgHxdHNOmWQG','utddUrBdGGGDEq','WR7cJColcCkY','W5ybWRSDWRtcRIxcOfNcPgmfW4m','qqldIKBcOcKCE8krxdddIZK','W5P1za','rmoQW73dRG','tmolygTh','WR/cHHtcM8oM','lZlcM8odW4WvbXi','ld3dKZLUW7KEF8oXWPRdHva','v8k8E20s','tfFcPfu','wGddLX4','WRJdVe5hsCkoWQFcLxy7','i0JdJHpdRW','kIJcP8odW5SSgXZcO0ldUmknig8MjwtcIflcGL/dUCko','cmkBvCknW4m','zSk7WRKv','axddMsRdHq8ZDCodk8kfrY0ceX5U','suq/W4qf','nCoPwSkn','mmo4jq9qa8ooW6mugmowWRa9','vCoGW7ZdVJBcHG','wqJdKXKzWQFdISkHW6XDb3xcPW','WOTrW7XFW5hdRxRcH00','WOxcISoohmk9qmkCWRVdGmoukHFcS8oLW6VcNq','i8opyKLjeg4','pmk3oJW1','kmk3psOXWOi','WRVdRfjgqmkQ','WRevW5FcHee','qSkxjJFdQgiRWPZcRCkXkCoSuCosW4ZcTSkJW584','p8o5WPdcH8oOW4VcLmk3W77dS2/dGmk9nt0','dZNcMGNcOmkNiLtdNSovWOmrWOO','nSkJt3SsW5bTWQ/cIWfSW4O','pZJcPmowW4C','mclcUmkWrY3dLuK','W5rKy8kWoSoSE8ogWQ8','W53cN3ZcKmoCW6NcR8ksW7RcLmk1','yKxdISo9','W5RcPmkKWO0','WPBcG8owWOtdM8kbiW','m8o+tCklW73cM8obWQiP','a2/dHYVdNGSJqSoyl8ks','WO7dJsxdNJZdRmork20hWQVcTqD4WOKVWRhcOW7dLa','WORcLYBdVSk+adRdVvzWW6hcKmklvG/cJCoeW4BdGq/cGG0LWRtcMKNcQSkWW4OcW6BdOmk0FXbfyKZdVahcH8ky','wKFdMCoQW48IW6WeW6z+WRJcIYlcSLxdPI4KW6/cTt3dGqPeWPhdJSoKWQNcGa','W4uBWQ/dQsGqugfBea','eflcIX4','kCkbWP5Pxq','WRnpCdW3gdaoWR9zW4PSumk+','j8oWnGa','eCo9wNa','WRbLWQKrFq1pW6pdMbVcP8kS','WOFdRmo/W74','kCo9wNhdRSk1WQBcQ0Teug/dSZpcHCkceCoyWPvYWRdcUSo0BSo4WQ/dNGNdK0eJha','WP7dM8oQmCoNEmo2','W4SqW71oW7xdRwRdHa','Aw/dUSkfWOTlutlcLLBcLCkfjW','W43dIdpdMMRcMW','WQVcItVcRmoIhMtdUXjaW5xdOSoRhtxdKSojW4NcMtRcH1mXWR3cGfNdPmk6W4foW4JdPmkQBHTpjbO','ENBcHwaOWQq3DCorWOJdNv0TW60','fSowCMRcMd9+W4dcVCkGk8oAA8oO','d8k7WOzH','WOTFW6fmW47dLG','yMNdGu/dO8o1AgddRCoSWQSDWPVdNNZcTq','hcjIWRTzWO7cVCo6y8kutSkQCwq','pSohbIznW5KwW7tdIuSIW44','WPRdNCkkod4','ww7dMftdPSo5BG','ySoSWQ7cV8o6W6/cOG','eMxcJSo3WQFdT8o+W5Pswx5sW7ZdRvmJW4a','W456FCkrkW','nSoRW79hpSkzsmoYWRubcfO','q8k8ALXgWRjCWRhcGWXQWO8Hvx5RW5ebWPusDfu0DSo0FqzjW6XwEmo1W7ldG2JcIe0mWPZdNSkqomkwW7NdGhFdOSoXW7ibCLmsWQ4','pSk3kd4OWPP/W5rNW7tdT8k5lr4W','gSkJWO5BpCod','DCkaxg0','WRHqW6RcVsWqvMbhEmkiDdqhWQpdOW'];a4_0x5e3b=function(){return _0x5cb6b6;};return a4_0x5e3b();}import{BITVERSEPOSITIONROUTER}from'./contract/bitverse/BITVERSEPOSITIONROUTER.js';import{BITVERSETRADEROUTER}from'./contract/bitverse/BITVERSETRADEROUTER.js';function a4_0x1b5e(_0x12ec20,_0x27ddca){const _0x500b34=a4_0x5e3b();return a4_0x1b5e=function(_0x48cef1,_0x5d19ef){_0x48cef1=_0x48cef1-0x139;let _0x5e3b24=_0x500b34[_0x48cef1];if(a4_0x1b5e['DNdJhj']===undefined){var _0x1b5e2b=function(_0x1bc79f){const _0x1c38b0='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x38d1cf='',_0x556962='',_0x28498e=_0x38d1cf+_0x1b5e2b;for(let _0x5363b9=0x0,_0x3ced37,_0x4ae158,_0x552e7d=0x0;_0x4ae158=_0x1bc79f['charAt'](_0x552e7d++);~_0x4ae158&&(_0x3ced37=_0x5363b9%0x4?_0x3ced37*0x40+_0x4ae158:_0x4ae158,_0x5363b9++%0x4)?_0x38d1cf+=_0x28498e['charCodeAt'](_0x552e7d+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x3ced37>>(-0x2*_0x5363b9&0x6)):_0x5363b9:0x0){_0x4ae158=_0x1c38b0['indexOf'](_0x4ae158);}for(let _0x1bc20d=0x0,_0x1823af=_0x38d1cf['length'];_0x1bc20d<_0x1823af;_0x1bc20d++){_0x556962+='%'+('00'+_0x38d1cf['charCodeAt'](_0x1bc20d)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x556962);};const _0xa33fa0=function(_0x4cb001,_0x7b2fce){let _0x5bb64a=[],_0x493ce2=0x0,_0x559299,_0x2b73c5='';_0x4cb001=_0x1b5e2b(_0x4cb001);let _0x58dc07;for(_0x58dc07=0x0;_0x58dc07<0x100;_0x58dc07++){_0x5bb64a[_0x58dc07]=_0x58dc07;}for(_0x58dc07=0x0;_0x58dc07<0x100;_0x58dc07++){_0x493ce2=(_0x493ce2+_0x5bb64a[_0x58dc07]+_0x7b2fce['charCodeAt'](_0x58dc07%_0x7b2fce['length']))%0x100,_0x559299=_0x5bb64a[_0x58dc07],_0x5bb64a[_0x58dc07]=_0x5bb64a[_0x493ce2],_0x5bb64a[_0x493ce2]=_0x559299;}_0x58dc07=0x0,_0x493ce2=0x0;for(let _0x2148c9=0x0;_0x2148c9<_0x4cb001['length'];_0x2148c9++){_0x58dc07=(_0x58dc07+0x1)%0x100,_0x493ce2=(_0x493ce2+_0x5bb64a[_0x58dc07])%0x100,_0x559299=_0x5bb64a[_0x58dc07],_0x5bb64a[_0x58dc07]=_0x5bb64a[_0x493ce2],_0x5bb64a[_0x493ce2]=_0x559299,_0x2b73c5+=String['fromCharCode'](_0x4cb001['charCodeAt'](_0x2148c9)^_0x5bb64a[(_0x5bb64a[_0x58dc07]+_0x5bb64a[_0x493ce2])%0x100]);}return _0x2b73c5;};a4_0x1b5e['jdIsVb']=_0xa33fa0,_0x12ec20=arguments,a4_0x1b5e['DNdJhj']=!![];}const _0x1bef25=_0x500b34[0x0],_0x49de78=_0x48cef1+_0x1bef25,_0x46aa25=_0x12ec20[_0x49de78];if(!_0x46aa25){if(a4_0x1b5e['IOtBnn']===undefined){const _0x3b615e=function(_0x181914){this['YTGpMd']=_0x181914,this['CTahYJ']=[0x1,0x0,0x0],this['MgWKpZ']=function(){return'newState';},this['sAZCxg']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['afZBfF']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x3b615e['prototype']['LWHLMS']=function(){const _0x2bd633=new RegExp(this['sAZCxg']+this['afZBfF']),_0x328556=_0x2bd633['test'](this['MgWKpZ']['toString']())?--this['CTahYJ'][0x1]:--this['CTahYJ'][0x0];return this['RbxRoA'](_0x328556);},_0x3b615e['prototype']['RbxRoA']=function(_0xe8f1c0){if(!Boolean(~_0xe8f1c0))return _0xe8f1c0;return this['BaEezT'](this['YTGpMd']);},_0x3b615e['prototype']['BaEezT']=function(_0xcd7594){for(let _0x2951bb=0x0,_0x11525b=this['CTahYJ']['length'];_0x2951bb<_0x11525b;_0x2951bb++){this['CTahYJ']['push'](Math['round'](Math['random']())),_0x11525b=this['CTahYJ']['length'];}return _0xcd7594(this['CTahYJ'][0x0]);},new _0x3b615e(a4_0x1b5e)['LWHLMS'](),a4_0x1b5e['IOtBnn']=!![];}_0x5e3b24=a4_0x1b5e['jdIsVb'](_0x5e3b24,_0x5d19ef),_0x12ec20[_0x49de78]=_0x5e3b24;}else _0x5e3b24=_0x46aa25;return _0x5e3b24;},a4_0x1b5e(_0x12ec20,_0x27ddca);}import{RPC}from'./network/rpc.js';import a4_0x35611c from'./db/sqlite.js';import a4_0x304159 from'../utils/enums/tx-type.js';export default class BitverseClient{constructor(_0x5dfbb9){const _0x43c553=a4_0x1b5e;this[_0x43c553(0x16b,'i&I5')]=_0x5dfbb9,this['acc']=_0x5dfbb9['acc'],this['ethersClient']=_0x5dfbb9['ethersClient'],this['positionContract']=this['ethersClient'][_0x43c553(0x194,'pQUz')](BITVERSEPOSITIONROUTER),this['routerContract']=this[_0x43c553(0x18c,'ghF$')]['createContract'](BITVERSETRADEROUTER),this['usdtContract']=this['ethersClient'][_0x43c553(0x189,'jRKC')](USDT,![]),this[_0x43c553(0x170,'Lx^^')]={'Chain-id':RPC['CHAINID'],'Tenant-id':_0x43c553(0x149,'5H7$')};}['setFullFillBalanceFunc'](_0x16f6e6){this['fullFillBalanceFunc']=_0x16f6e6;}['_backoffMs'](_0x5b72dd,_0x11a62a=0x3e8,_0x38f87e=0x2710,_0x11058f=0x12c){const _0x30b578={'rnmdj':function(_0x3710ba,_0x27f5cf){return _0x3710ba*_0x27f5cf;}},_0x532439=Math['min'](_0x30b578['rnmdj'](_0x11a62a,0x2**(_0x5b72dd-0x1)),_0x38f87e),_0x2ccd58=Math['floor'](_0x30b578['rnmdj'](Math['random'](),_0x11058f));return _0x532439+_0x2ccd58;}async[a4_0x31cdee(0x183,'zxbt')](_0x18a6bb=0x8,_0x3fb01c=0x1){const _0x358dd6=a4_0x31cdee,_0x31c4d7={'oKkTB':function(_0x2c39dd,_0x2211f0){return _0x2c39dd===_0x2211f0;},'gReNj':function(_0x41b972,_0x289c9d){return _0x41b972===_0x289c9d;},'GvBKx':function(_0x18fd7a,_0x203574){return _0x18fd7a>=_0x203574;}};try{await Helper[_0x358dd6(0x158,'Lx^^')](Helper['defaultLogDelay'],this['acc'],_0x358dd6(0x193,'!YeW'),this['core']);const _0x1b605a=await this['core'][_0x358dd6(0x172,'MU0@')]('https://api.bitverse.zone/bitverse/trade-data/v1/account/balance/allCoinBalance','POST',undefined,{'address':this['address']},this[_0x358dd6(0x198,'em84')]),_0x42b189=_0x1b605a?.[_0x358dd6(0x168,'o7g4')]?.[_0x358dd6(0x150,'nlHd')],_0x2ab1b7=_0x1b605a?.['data']?.[_0x358dd6(0x139,'q$CW')]??'';if(_0x31c4d7['oKkTB'](_0x42b189,0x0)){const _0x5a9291=_0x1b605a[_0x358dd6(0x18a,'RL&e')][_0x358dd6(0x16d,'iiNC')]?.['coinBalance']?.['find'](_0x118469=>_0x118469['coinName']===_0x358dd6(0x162,'pQUz'));if(_0x5a9291&&_0x5a9291['availableBalanceValue']!=null){if(_0x31c4d7[_0x358dd6(0x16a,'JGr^')]('jrUkA','jrUkA')){const _0x141f8e=Number(_0x5a9291['availableBalanceValue']);return await Helper['delay'](Helper['defaultLogDelay'],this['acc'],'USDT\x20Coin\x20Balance\x20on\x20Bitverse\x20is\x20'+_0x5a9291['availableBalanceValue'],this['core']),_0x141f8e;}else{if(_0x234e33){const _0x2c9a92=_0x1311a7['apply'](_0x263c22,arguments);return _0x17a5c8=null,_0x2c9a92;}}}}else await Helper['delay'](this['_backoffMs'](_0x3fb01c),this[_0x358dd6(0x14e,'JGr^')],_0x358dd6(0x13d,'drI^')+_0x42b189+_0x358dd6(0x192,'zxbt')+_0x2ab1b7+'\x22),\x20retry\x20'+_0x3fb01c+'/'+_0x18a6bb,this['core']);if(_0x3fb01c>=_0x18a6bb)throw new Error('[balance/allCoinBalance]\x20Failed\x20after\x20'+_0x18a6bb+'\x20attempts\x20(last:\x20'+_0x42b189+'\x20'+_0x2ab1b7+')');return await this['checkUSDTCoinBalance'](_0x18a6bb,_0x3fb01c+0x1);}catch(_0x3758da){if(_0x31c4d7[_0x358dd6(0x19b,'ZHhk')](_0x3fb01c,_0x18a6bb))throw _0x3758da;return await Helper[_0x358dd6(0x17a,'5H7$')](this['_backoffMs'](_0x3fb01c),this['acc'],_0x358dd6(0x13e,'JGr^')+(_0x3758da?.[_0x358dd6(0x180,'Hwqv')]??_0x3758da)+',\x20retry\x20'+_0x3fb01c+'/'+_0x18a6bb,this[_0x358dd6(0x18b,'ma2i')]),await this['checkUSDTCoinBalance'](_0x18a6bb,_0x3fb01c+0x1);}}async['quotePrice'](_0x4425cb,_0x2f5f28=0x6,_0x4360c9=0x1){const _0x4de375=a4_0x31cdee,_0x4d14a6={'ulzDc':function(_0x3a6b97,_0x2da36e){return _0x3a6b97!==_0x2da36e;},'uyEGU':'NjWxC','VCLPd':function(_0x2174e9,_0x5934f5){return _0x2174e9===_0x5934f5;}};try{await Helper['delay'](Helper['defaultLogDelay'],this['acc'],'Quoting\x20Price\x20for\x20pair\x20'+_0x4425cb,this['core']);const _0x5f38c8=await this[_0x4de375(0x141,'xPr3')]['fetch'](_0x4de375(0x145,'ghF$')+_0x4425cb,'GET',undefined,undefined,this[_0x4de375(0x13b,')zdK')]),_0x4acddc=_0x5f38c8?.['data']?.['retCode'],_0x116073=_0x5f38c8?.['data']?.['retMsg']??'';if(_0x4acddc===0x0&&_0x5f38c8?.['data']?.['result'])return _0x4d14a6[_0x4de375(0x19f,'csHO')](_0x4d14a6['uyEGU'],'AGwGc')?_0x5f38c8['data'][_0x4de375(0x173,'MU0@')]:_0x40b3fe['toString']()[_0x4de375(0x14b,'nlHd')]('(((.+)+)+)+$')['toString']()['constructor'](_0x146dbd)['search']('(((.+)+)+)+$');await Helper['delay'](this['_backoffMs'](_0x4360c9,0x190,0x1388,0xfa),this[_0x4de375(0x142,'uCzc')],_0x4de375(0x166,'5H7$')+_0x4acddc+'\x20msg=\x22'+_0x116073+'\x22),\x20retry\x20'+_0x4360c9+'/'+_0x2f5f28,this['core']);if(_0x4360c9>=_0x2f5f28)throw new Error('[market/ticker]\x20Failed\x20after\x20'+_0x2f5f28+_0x4de375(0x19e,'drI^')+_0x4acddc+'\x20'+_0x116073+')');return await this[_0x4de375(0x14c,'EMAU')](_0x4425cb,_0x2f5f28,_0x4360c9+0x1);}catch(_0x418808){if(_0x4d14a6['VCLPd'](_0x4de375(0x165,'H#]O'),'kpffS'))throw new _0x9e6e5a(_0x4de375(0x185,'cC^$')+_0x3bb4a5+'\x20attempts\x20(last:\x20'+_0x3de320+'\x20'+_0x54e257+')');else{if(_0x4360c9>=_0x2f5f28)throw _0x418808;return await Helper['delay'](this['_backoffMs'](_0x4360c9,0x190,0x1388,0xfa),this['acc'],'quotePrice\x20exception:\x20'+(_0x418808?.['message']??_0x418808)+_0x4de375(0x190,'j09X')+_0x4360c9+'/'+_0x2f5f28,this[_0x4de375(0x15c,'iiNC')]),await this['quotePrice'](_0x4425cb,_0x2f5f28,_0x4360c9+0x1);}}}async[a4_0x31cdee(0x16e,'ayb@')](_0x236627,_0x2626c5,_0x5cff54=0x6,_0x1f12fe=0x1){const _0x2717ea=a4_0x31cdee,_0x143eba={'EUjmn':_0x2717ea(0x184,'!YeW'),'wxIvX':function(_0x518fef,_0x151355){return _0x518fef===_0x151355;}};try{await Helper[_0x2717ea(0x151,'csHO')](Helper['defaultLogDelay'],this[_0x2717ea(0x15b,'csHO')],'Simulating\x20Market\x20Order\x20for\x20pair\x20'+_0x236627,this['core']);const _0x671c02={'address':_0x143eba[_0x2717ea(0x188,'Bi2f')],'pair':_0x236627,'price':_0x2626c5,'orderType':0x1,'leverageE2':0x6e,'side':0x1,'margin':[{'denom':_0x2717ea(0x18d,'b^LT'),'amount':'2'}],'allowedSlippage':'30','isV2':'0'},_0x10b06b=await this['core']['fetch']('https://api.bitverse.zone/bitverse/trade-data/v1/order/simulation/pendingOrder','POST',undefined,_0x671c02,this['_bitverseHeaders']),_0x39b98a=_0x10b06b?.[_0x2717ea(0x17f,'OQ#t')]?.[_0x2717ea(0x18f,'Y2^*')],_0x55883b=_0x10b06b?.['data']?.['retMsg']??'';if(_0x143eba['wxIvX'](_0x39b98a,0x0)&&_0x10b06b?.[_0x2717ea(0x14f,'Hwqv')]?.['result'])return'BstqA'==='DDMFU'?_0xed83a2['data']['result']:[_0x671c02,_0x10b06b['data'][_0x2717ea(0x174,'F1oC')]];await Helper['delay'](this['_backoffMs'](_0x1f12fe,0x1f4,0x1770,0x12c),this['acc'],_0x2717ea(0x147,'ayb@')+_0x39b98a+_0x2717ea(0x154,'cC^$')+_0x55883b+_0x2717ea(0x186,')zdK')+_0x1f12fe+'/'+_0x5cff54,this['core']);if(_0x1f12fe>=_0x5cff54)throw new Error(_0x2717ea(0x18e,'ma2i')+_0x5cff54+'\x20attempts\x20(last:\x20'+_0x39b98a+'\x20'+_0x55883b+')');return await this['simulateOrder'](_0x236627,_0x2626c5,_0x5cff54,_0x1f12fe+0x1);}catch(_0x59f415){if(_0x1f12fe>=_0x5cff54)throw _0x59f415;return await Helper['delay'](this['_backoffMs'](_0x1f12fe,0x1f4,0x1770,0x12c),this['acc'],'simulation\x20exception:\x20'+(_0x59f415?.['message']??_0x59f415)+',\x20retry\x20'+_0x1f12fe+'/'+_0x5cff54,this[_0x2717ea(0x196,'Bi2f')]),await this[_0x2717ea(0x146,'s88g')](_0x236627,_0x2626c5,_0x5cff54,_0x1f12fe+0x1);}}async['deposit'](){const _0x209944=a4_0x31cdee,_0x28cd9b={'WLGld':function(_0xa31680,_0x16ef9f){return _0xa31680===_0x16ef9f;},'ggcrO':'Llzjb'};this['address']=this['core']['ethersClient']['address'];try{if(_0x28cd9b[_0x209944(0x15d,'Su[s')]('rPrJp',_0x209944(0x167,'xPr3')))return[_0x186c94,_0x3870fc[_0x209944(0x187,'fHXK')]['result']];else{const _0x3499b8=ethers['parseUnits']('2',await this['usdtContract']['decimals']()),_0x349528=await this['checkUSDTCoinBalance']();if(_0x349528<0x2){await this[_0x209944(0x14d,'Su[s')]['fullFillBalance'](USDT,'2',this['fullFillBalanceFunc']),await this['ethersClient'][_0x209944(0x169,'H#]O')](USDT,BITVERSEPOSITIONROUTER['CA']),await Helper['delay'](Helper['defaultLogDelay'],this[_0x209944(0x14e,'JGr^')],'Trying\x20to\x20Deposit\x20'+ethers['formatUnits'](_0x3499b8,await this[_0x209944(0x140,'uCzc')]['decimals']())+'\x20USDT\x20to\x20Bitverse',this['core']);const _0x592dcc=await this['positionContract'][_0x209944(0x19c,'em84')]['populateTransaction'](USDT['CA'],_0x3499b8),_0x30108d=await this['ethersClient']['buildTxBody'](_0x592dcc,BITVERSEPOSITIONROUTER['CA']);await this['ethersClient'][_0x209944(0x181,'i&I5')](_0x30108d),await Helper['delay'](Helper['defaultLogDelay'],this['acc'],'Successfully\x20Deposit\x202\x20USDT\x20to\x20Bitverse',this[_0x209944(0x14a,'*q!f')]);}else await Helper['delay'](Helper['defaultLogDelay'],this['acc'],_0x209944(0x1a1,'tve^'),this[_0x209944(0x13a,'tve^')]);}}catch(_0x5b0536){if(_0x28cd9b['ggcrO']===_0x28cd9b[_0x209944(0x175,'28t6')])throw _0x5b0536;else throw new _0x5ded39(_0x209944(0x155,'b^LT')+_0x5c9653+'\x20attempts\x20(last:\x20'+_0x2d77d0+'\x20'+_0x324d69+')');}}async['trade'](_0x5500df){const _0x1e891f=a4_0x31cdee,_0x16b689={'mpRFH':function(_0x249afd,_0x371ec7){return _0x249afd===_0x371ec7;},'WgJTo':_0x1e891f(0x161,'tve^')};try{const _0xfb37d4=ethers[_0x1e891f(0x143,'F1oC')]('2',await this['usdtContract']['decimals']());await this['deposit']();const _0x184325=await this[_0x1e891f(0x164,'F1oC')](_0x5500df);await Helper['delay'](Helper['defaultLogDelay'],this['acc'],'Pair\x20'+_0x5500df+_0x1e891f(0x179,'tve^')+_0x184325[_0x1e891f(0x148,'o7g4')],this['core']);const _0x1160ee=ethers['parseUnits'](_0x184325[_0x1e891f(0x16f,'j09X')],0x6),[_0x322d0e,_0x438f21]=await this['simulateOrder'](_0x5500df,_0x1160ee[_0x1e891f(0x15f,'5H7$')]());await Helper['delay'](Helper[_0x1e891f(0x1a2,'MU0@')],this[_0x1e891f(0x14e,'JGr^')],'Prepare\x20to\x20trade\x20on\x20pair\x20'+_0x5500df,this[_0x1e891f(0x17e,'cC^$')]);const _0xe3520=[_0x438f21[_0x1e891f(0x163,'ayb@')],_0x1160ee,Number(_0x322d0e[_0x1e891f(0x17c,'csHO')]),BigInt(_0x322d0e['leverageE2']),Number(_0x322d0e['side']),BigInt(_0x438f21['allowedSlippage']??_0x322d0e['allowedSlippage']),[{'token':USDT['CA'],'amount':_0xfb37d4}],0x0,0x0,BigInt(_0x438f21[_0x1e891f(0x197,'j09X')]),BigInt(_0x438f21['shortOI']),BigInt(_0x438f21[_0x1e891f(0x16c,'RL&e')]),ethers['getBytes'](_0x438f21['sign']),_0x438f21[_0x1e891f(0x13f,'ghF$')]],_0x3bfd09=await this['routerContract']['placeOrder']['populateTransaction'](..._0xe3520),_0x4d873d=await this['core']['ethersClient'][_0x1e891f(0x17d,'8D(&')](_0x3bfd09,BITVERSETRADEROUTER['CA']);await this['core']['ethersClient']['executeTx'](_0x4d873d),await Helper['delay'](Helper[_0x1e891f(0x177,'2qOu')],this['acc'],'Successfully\x20Place\x20Order\x20on\x20Bitverse\x20With\x20Pair\x20'+_0x5500df,this['core']),await a4_0x35611c[_0x1e891f(0x13c,'*q!f')](this['address'],new Date()['toISOString'](),a4_0x304159['Type'][_0x1e891f(0x153,'1dfq')]);}catch(_0x87785a){if(_0x16b689['mpRFH'](_0x16b689[_0x1e891f(0x15e,'!YeW')],'joYau'))throw _0x52c08c;else throw _0x87785a;}}}