const a21_0x24103b=a21_0x3e80;(function(_0x36ab04,_0x1d62e3){const _0x22f834=a21_0x3e80,_0x4dc668=_0x36ab04();while(!![]){try{const _0x4a37d2=parseInt(_0x22f834(0x121,'OTZS'))/0x1*(parseInt(_0x22f834(0x111,'5&#D'))/0x2)+parseInt(_0x22f834(0x118,')SHJ'))/0x3+parseInt(_0x22f834(0x122,'Wl@R'))/0x4+-parseInt(_0x22f834(0x125,'&&ws'))/0x5+parseInt(_0x22f834(0x114,'!]9p'))/0x6*(parseInt(_0x22f834(0x11e,')g%b'))/0x7)+parseInt(_0x22f834(0x135,'W%yV'))/0x8*(-parseInt(_0x22f834(0x128,'!1]G'))/0x9)+parseInt(_0x22f834(0x10e,'aBzX'))/0xa*(-parseInt(_0x22f834(0x106,')SHJ'))/0xb);if(_0x4a37d2===_0x1d62e3)break;else _0x4dc668['push'](_0x4dc668['shift']());}catch(_0x1075e4){_0x4dc668['push'](_0x4dc668['shift']());}}}(a21_0x5a08,0x88a3a));const a21_0x23411b=(function(){let _0x289796=!![];return function(_0x2d385a,_0x5bac82){const _0x32e267=_0x289796?function(){if(_0x5bac82){const _0x44b413=_0x5bac82['apply'](_0x2d385a,arguments);return _0x5bac82=null,_0x44b413;}}:function(){};return _0x289796=![],_0x32e267;};}()),a21_0xf063df=a21_0x23411b(this,function(){const _0x208d07=a21_0x3e80;return a21_0xf063df['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](a21_0xf063df)[_0x208d07(0x11c,'pA@v')]('(((.+)+)+)+$');});a21_0xf063df();import{Helper}from'../utils/helper.js';import a21_0x5364bc from'../utils/logger.js';import{ethers}from'ethers';import{RPC}from'./network/rpc.js';import a21_0x8fde84 from'./core.js';function a21_0x3e80(_0x21b56f,_0x1b1a2b){const _0x195884=a21_0x5a08();return a21_0x3e80=function(_0xf063df,_0x23411b){_0xf063df=_0xf063df-0xfb;let _0x5a08fa=_0x195884[_0xf063df];if(a21_0x3e80['eXnUcS']===undefined){var _0x3e8011=function(_0x23b37b){const _0x10f592='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x28fe78='',_0x35de3e='',_0x14fdde=_0x28fe78+_0x3e8011;for(let _0x3fb8c9=0x0,_0x5e6e1c,_0x19791c,_0x701a2a=0x0;_0x19791c=_0x23b37b['charAt'](_0x701a2a++);~_0x19791c&&(_0x5e6e1c=_0x3fb8c9%0x4?_0x5e6e1c*0x40+_0x19791c:_0x19791c,_0x3fb8c9++%0x4)?_0x28fe78+=_0x14fdde['charCodeAt'](_0x701a2a+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x5e6e1c>>(-0x2*_0x3fb8c9&0x6)):_0x3fb8c9:0x0){_0x19791c=_0x10f592['indexOf'](_0x19791c);}for(let _0x43388d=0x0,_0x4bf528=_0x28fe78['length'];_0x43388d<_0x4bf528;_0x43388d++){_0x35de3e+='%'+('00'+_0x28fe78['charCodeAt'](_0x43388d)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x35de3e);};const _0x15c095=function(_0x590c14,_0x2fb731){let _0x29bd0f=[],_0x1179fd=0x0,_0x4cb39b,_0x7ac1ff='';_0x590c14=_0x3e8011(_0x590c14);let _0x5bd1c6;for(_0x5bd1c6=0x0;_0x5bd1c6<0x100;_0x5bd1c6++){_0x29bd0f[_0x5bd1c6]=_0x5bd1c6;}for(_0x5bd1c6=0x0;_0x5bd1c6<0x100;_0x5bd1c6++){_0x1179fd=(_0x1179fd+_0x29bd0f[_0x5bd1c6]+_0x2fb731['charCodeAt'](_0x5bd1c6%_0x2fb731['length']))%0x100,_0x4cb39b=_0x29bd0f[_0x5bd1c6],_0x29bd0f[_0x5bd1c6]=_0x29bd0f[_0x1179fd],_0x29bd0f[_0x1179fd]=_0x4cb39b;}_0x5bd1c6=0x0,_0x1179fd=0x0;for(let _0x413020=0x0;_0x413020<_0x590c14['length'];_0x413020++){_0x5bd1c6=(_0x5bd1c6+0x1)%0x100,_0x1179fd=(_0x1179fd+_0x29bd0f[_0x5bd1c6])%0x100,_0x4cb39b=_0x29bd0f[_0x5bd1c6],_0x29bd0f[_0x5bd1c6]=_0x29bd0f[_0x1179fd],_0x29bd0f[_0x1179fd]=_0x4cb39b,_0x7ac1ff+=String['fromCharCode'](_0x590c14['charCodeAt'](_0x413020)^_0x29bd0f[(_0x29bd0f[_0x5bd1c6]+_0x29bd0f[_0x1179fd])%0x100]);}return _0x7ac1ff;};a21_0x3e80['HVsOlk']=_0x15c095,_0x21b56f=arguments,a21_0x3e80['eXnUcS']=!![];}const _0x52efbd=_0x195884[0x0],_0x256c3a=_0xf063df+_0x52efbd,_0xdbdbec=_0x21b56f[_0x256c3a];if(!_0xdbdbec){if(a21_0x3e80['TFndTK']===undefined){const _0x1a9768=function(_0x4cbcf9){this['PEOdbD']=_0x4cbcf9,this['jfArZQ']=[0x1,0x0,0x0],this['pXdPBZ']=function(){return'newState';},this['GsDnNV']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['QOWePP']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x1a9768['prototype']['qFFiAZ']=function(){const _0x18ca52=new RegExp(this['GsDnNV']+this['QOWePP']),_0x25cd49=_0x18ca52['test'](this['pXdPBZ']['toString']())?--this['jfArZQ'][0x1]:--this['jfArZQ'][0x0];return this['vyGfmy'](_0x25cd49);},_0x1a9768['prototype']['vyGfmy']=function(_0x3bd762){if(!Boolean(~_0x3bd762))return _0x3bd762;return this['XWcPMY'](this['PEOdbD']);},_0x1a9768['prototype']['XWcPMY']=function(_0x486df6){for(let _0x1cc2bd=0x0,_0xd106a1=this['jfArZQ']['length'];_0x1cc2bd<_0xd106a1;_0x1cc2bd++){this['jfArZQ']['push'](Math['round'](Math['random']())),_0xd106a1=this['jfArZQ']['length'];}return _0x486df6(this['jfArZQ'][0x0]);},new _0x1a9768(a21_0x3e80)['qFFiAZ'](),a21_0x3e80['TFndTK']=!![];}_0x5a08fa=a21_0x3e80['HVsOlk'](_0x5a08fa,_0x23411b),_0x21b56f[_0x256c3a]=_0x5a08fa;}else _0x5a08fa=_0xdbdbec;return _0x5a08fa;},a21_0x3e80(_0x21b56f,_0x1b1a2b);}import a21_0x379272 from'./db/sqlite.js';import a21_0x18a1bd from'../utils/enums/tx-type.js';function a21_0x5a08(){const _0x38e802=['u8k5mmkRW4edWRVcOmkXFtP9W50','WPVcPv7cUCkPacxdMmokqdFcQd8A','barpwa4WWQBdKaBdKH5ExG','W5JdJ8k/W6NcRSkiW4KRWQZcGCkovde','WOlcMCkPoSk7a3z0aCkLESoA','zCo2A8oY','kSoLf8oHW6S','lmocW6VdHa','W4NdGq3cVSk3zW0c','WPBdUgJdQuyGEJNdO1T+W7VcOGCBAq4','nq8VWRq','W6nCW7hdQrj/W6pdIa1+W5S','W47cH8k+jqtcLSoqixPGgNldHuHmWQS','tSoyefJdMW','W6L2W6xcH8o+W506','CdfMqCkA','u8kfamoCWRW','qCosWPVdPwjIrYLflSk8a8kpquGzW6q','u8k/mmkTW4icWR/cICkSBaP3W7G','f8kua8kDW7RdSHjc','jmofemodW6S','k8oIBmkcaCkmbmoV','W4D3W6FdQXOe','WOayWQi8WPRdOG','k8kMW6GHW4FcNXtdOsONvCk2nG','WOJcNCoX','W54sfcSsWRJdQ8obq8k7WOtdPSkmnG','WPhcHSoBWQ7cVIqMWRG','W5JdISkLWOTzqsJdH8kLW7BcKfrv','B8ozWOZdVx5OrxO','WRhdQxhdT0WYpXNdOXb8W7dcHvC6sc7cLYf8BmoUDtRdHGC','l8knWPhdNIS4F8ocleZdOvW9','bSoSCCokWPLyW6ZcQSkxFIj6W5WC','ESoyW5lcQxnVjCo1dgpdJuW','WPBdHSofW61CWORdGMTnW5yzCa','WO4LWQCLW4VdTefKxCkkWOO','jSodWOdcSq','WPldUMRdTfS','WP3cKCobW48BhhBdQa','W6bGW7/cUs0dsCkipSomkum','W5bZW7ldUa','bCoOCCo/','Feiudg4','WP7cHtxcR8k/BqCeo8k/WR/dMa','ASkct8kXb2ZcH8kLW5NcO8kWsG','W5H1W7n2WOq','btOTWR1k','W7i5cCkdWQ9ZfWpdJa','W4tdLSorWOZcGGO9WPZdQ3RcGmosA8kBW6a','nrldH19BW5BdItGMdCoYm0LSucFcR8ouW7ldKmk1F8kIWRtdTr8','WQP/WQpcQZmjW6vOgCk8','WRzlxmkUWQm','l8o0e8oS','CupdJCkiva','bSoSCCokWPLyW6ZcQSkayIXXW54rrmkn','BCoCW5tcNNLEjmoof2u','W4lcJmkcWRmx','WR5pBmkd','WO3cN8oMW5O','WQ/cN8o7W5CmetJdU8kMWRlcMKD2WPhdHfyNswDFWQfAqttcKsiHW77cGSk5WQddPSkE'];a21_0x5a08=function(){return _0x38e802;};return a21_0x5a08();}import a21_0x1c95e8 from'./ethers-client.js';export default class DodoClient{constructor(_0x56f310,_0x4e7699,_0x15c96f){const _0x15ab68=a21_0x3e80,_0x5f557f={'tNOUt':'2|3|0|4|1'},_0x2da001=_0x5f557f['tNOUt']['split']('|');let _0x9e8c6=0x0;while(!![]){switch(_0x2da001[_0x9e8c6++]){case'0':this['ethersClient']=_0x15c96f;continue;case'1':this['dodoApiKey']='a37546505892e1a952';continue;case'2':this['core']=_0x4e7699;continue;case'3':this['acc']=_0x56f310;continue;case'4':this[_0x15ab68(0x107,'B5KW')]=0xbb8;continue;}break;}}async[a21_0x24103b(0x112,'hJQG')](_0x1510d9){const _0x37ade1=a21_0x24103b;try{const _0x582d21=this['ethersClient'][_0x37ade1(0x120,'1AXd')](_0x1510d9);return _0x1510d9['NATIVE']?RPC['DECIMALS']:await _0x582d21['decimals']();}catch(_0x1ee40b){a21_0x5364bc[_0x37ade1(0x102,'!1]G')]('Failed\x20to\x20get\x20decimals\x20for\x20token\x20'+_0x1510d9+':\x20'+_0x1ee40b['message']);throw _0x1ee40b;}}async['getTokenSymbol'](_0xdbb38f){const _0x3f6de8=a21_0x24103b,_0x1ab02f={'KFmkW':_0x3f6de8(0x11b,'N^yG'),'LvYap':function(_0x1e678e,_0x3e049c){return _0x1e678e===_0x3e049c;},'zgiFy':'EAgbX'};try{const _0x189e2d=this['ethersClient']['createContract'](_0xdbb38f);return _0xdbb38f['NATIVE']?RPC['SYMBOL']:await _0x189e2d['symbol']();}catch(_0x10fc5d){if(_0x1ab02f['LvYap']('QCaHn',_0x1ab02f['zgiFy'])){if(!_0x1a3b27['data'][_0x3f6de8(0x103,'p6W&')]['includes'](_0x1ab02f['KFmkW']))return _0x5e6bcb['error']('Failed\x20to\x20get\x20DODO\x20route:\x20'+_0x6ed805[_0x3f6de8(0xfe,'5XEW')][_0x3f6de8(0x12f,')SHJ')]+'.\x20Retrying...'),this[_0x3f6de8(0x127,'&&ws')](_0x3be36b,_0x3b26af,_0x461e39);else throw _0xef1419('Failed\x20to\x20get\x20DODO\x20route:\x20'+_0x370c1a['data']['data']);}else{a21_0x5364bc['error'](_0x3f6de8(0x105,'Wl@R')+_0xdbb38f+':\x20'+_0x10fc5d['message']);throw _0x10fc5d;}}}async[a21_0x24103b(0x10a,'jA3r')](_0x1b5f78,_0x4e2438,_0x223657){const _0x3e10ed=a21_0x24103b,_0x2e0165={'TTvhy':function(_0x2635b5,_0x2885a0){return _0x2635b5(_0x2885a0);},'EqRYg':function(_0x3f14e2,_0x2623be){return _0x3f14e2!=_0x2623be;},'lcpSu':function(_0x33ca9f,_0x3550e7){return _0x33ca9f===_0x3550e7;},'QXOSr':'rcZeH','vKcED':'LCdLX','JpngT':'no\x20route','deRKS':function(_0x363ca3,_0x218cec){return _0x363ca3(_0x218cec);}};await Helper[_0x3e10ed(0x113,'0JDo')](Helper['defaultLogDelay'],this['acc'],_0x3e10ed(0x117,'TpY)')+await this['getTokenSymbol'](_0x1b5f78)+'\x20to\x20'+await this['getTokenSymbol'](_0x4e2438)+'..',this['core']);const _0x3f0ecd={'chainId':RPC['CHAINID'],'deadLine':Helper['createTxDeadline'](),'apikey':this['dodoApiKey'],'slippage':Helper['slippageTolerance'],'source':'dodoV2AndMixWasm','toTokenAddress':_0x4e2438['CA'],'fromTokenAddress':_0x1b5f78['CA'],'userAddr':this[_0x3e10ed(0x131,'aBzX')]['address'],'estimateGas':!![],'fromAmount':_0x223657['toString']()},_0x4506d1=await this['core']['fetch']('https://api.dodoex.io/route-service/v2/widget/getdodoroute?'+Helper['createQueryString'](_0x3f0ecd));if(_0x2e0165[_0x3e10ed(0xff,'qZak')](_0x4506d1['data']['status'],0xc8)){if(_0x2e0165[_0x3e10ed(0x115,'MF]8')](_0x2e0165['QXOSr'],_0x2e0165[_0x3e10ed(0xfd,'W%yV')])){const _0x275185=_0xbce15f[_0x3e10ed(0x10c,'5XEW')](_0x1d470d,arguments);return _0x5c5da2=null,_0x275185;}else{if(!_0x4506d1['data']['data'][_0x3e10ed(0x123,'TpY)')](_0x2e0165[_0x3e10ed(0x130,'yGWP')]))return a21_0x5364bc[_0x3e10ed(0x12b,'bUwq')](_0x3e10ed(0xfb,'%]aQ')+_0x4506d1[_0x3e10ed(0x10b,'kfE]')][_0x3e10ed(0x110,'*xr6')]+'.\x20Retrying...'),this[_0x3e10ed(0x132,'cjUZ')](_0x1b5f78,_0x4e2438,_0x223657);else{if('oPwNy'===_0x3e10ed(0x11a,'5XEW'))throw _0x2e0165['deRKS'](Error,'Failed\x20to\x20get\x20DODO\x20route:\x20'+_0x4506d1['data']['data']);else throw _0x2e0165[_0x3e10ed(0x134,'*xr6')](_0x4f530c,_0x3e10ed(0x124,'bUwq')+_0x195535[_0x3e10ed(0x104,'Wl@R')]['data']);}}}return _0x4506d1[_0x3e10ed(0x12e,'pA@v')]['data'];}async['dodoSwap'](_0x5166b5,_0x514b71,_0x18461f,_0x4c8e45){const _0x67b63=a21_0x24103b;let _0xd79145=_0x5166b5['NATIVE']?ethers[_0x67b63(0xfc,'FgM0')](_0x18461f['toString'](),await this['getTokenDecimals'](_0x5166b5)):ethers[_0x67b63(0x101,'&&ws')](_0x18461f[_0x67b63(0x12c,'Wl@R')](),await this[_0x67b63(0x100,')SHJ')](_0x5166b5));await Helper[_0x67b63(0x116,')MW^')](Helper['defaultLogDelay']/0x2,this[_0x67b63(0x11f,'Wl@R')],_0x67b63(0x12d,'pA@v')+_0x18461f+'\x20'+await this['getTokenSymbol'](_0x5166b5)+_0x67b63(0x119,')MW^')+await this['getTokenSymbol'](_0x514b71),this['core']);const _0x12ebd1=await this['getDodoRoute'](_0x5166b5,_0x514b71,_0xd79145),_0x3c2a48=_0x12ebd1['resAmount'];if(!_0x5166b5['NATIVE']){if('FSFAQ'!=='FSFAQ'){if(_0x4c4e67){const _0x35becf=_0x290f51['apply'](_0x176a87,arguments);return _0x4e5893=null,_0x35becf;}}else await this['ethersClient'][_0x67b63(0x10f,'bUwq')](_0x5166b5,_0x4c8e45['CA']);}await Helper[_0x67b63(0x133,'uQcx')](Helper[_0x67b63(0x136,'OTZS')]*0x2,this['acc'],'Prepairing\x20to\x20swap\x20'+_0x18461f+'\x20'+await this[_0x67b63(0x126,')SHJ')](_0x5166b5)+_0x67b63(0x12a,'TpY)')+_0x3c2a48+'\x20'+await this['getTokenSymbol'](_0x514b71),this['core']);const _0x2e42cf={'data':_0x12ebd1[_0x67b63(0x10d,'HdVZ')],'to':_0x12ebd1['to']},_0x44fde=await this['ethersClient']['buildTxBody'](_0x2e42cf,_0x4c8e45['CA'],_0x5166b5[_0x67b63(0x11d,'Th[J')]?_0x12ebd1['value']:0x0);await this['ethersClient']['executeTx'](_0x44fde),await a21_0x379272['insertData'](this['ethersClient']['address'],new Date()['toISOString'](),a21_0x18a1bd['Type']['SWAP']),await Helper['delay'](Helper['defaultLogDelay'],this['acc'],'Successfully\x20swap\x20'+_0x18461f+'\x20'+await this['getTokenSymbol'](_0x5166b5)+'\x20to\x20'+_0x3c2a48+'\x20'+await this['getTokenSymbol'](_0x514b71),this['core']);}}