(function(_0x43c860,_0x23eda5){const _0xe73a38=a20_0x1187,_0x4bfd11=_0x43c860();while(!![]){try{const _0x3d3a99=-parseInt(_0xe73a38(0x11b,'#ZtH'))/0x1*(-parseInt(_0xe73a38(0xfd,']Y!y'))/0x2)+-parseInt(_0xe73a38(0x119,'10tF'))/0x3+parseInt(_0xe73a38(0x11f,')%oJ'))/0x4+-parseInt(_0xe73a38(0x103,'o5nA'))/0x5*(parseInt(_0xe73a38(0x111,'GTkM'))/0x6)+-parseInt(_0xe73a38(0x121,'(NE&'))/0x7*(-parseInt(_0xe73a38(0x10c,'1iQJ'))/0x8)+parseInt(_0xe73a38(0x11a,'x0&e'))/0x9+-parseInt(_0xe73a38(0x10f,'X!r6'))/0xa;if(_0x3d3a99===_0x23eda5)break;else _0x4bfd11['push'](_0x4bfd11['shift']());}catch(_0x3720ed){_0x4bfd11['push'](_0x4bfd11['shift']());}}}(a20_0x2169,0x442ed));const a20_0x218323=(function(){const _0x59d727=a20_0x1187,_0x2e7113={'YXLoO':_0x59d727(0xfe,'B5(N')};let _0x1888a3=!![];return function(_0x3d7faa,_0x3c7934){const _0x352280=_0x59d727;if('QQRVW'!==_0x2e7113[_0x352280(0x101,'jufp')])return _0x324534['error']('Failed\x20to\x20get\x20DODO\x20route:\x20'+_0x4dfa09['data']['data']+_0x352280(0x109,'8n2*')),this[_0x352280(0x12d,'TbC%')](_0x199511,_0x1f2d25,_0x33aafe);else{const _0x5a3c00=_0x1888a3?function(){const _0x133769=_0x352280;if(_0x3c7934){const _0x2d0e05=_0x3c7934[_0x133769(0x118,'nGvP')](_0x3d7faa,arguments);return _0x3c7934=null,_0x2d0e05;}}:function(){};return _0x1888a3=![],_0x5a3c00;}};}()),a20_0x4de45c=a20_0x218323(this,function(){const _0x4e8fdb=a20_0x1187,_0x4bf399={'JKALc':_0x4e8fdb(0xf6,'SvX(')};return a20_0x4de45c[_0x4e8fdb(0xf7,'^3]X')]()['search'](_0x4bf399['JKALc'])[_0x4e8fdb(0x10a,'*m]7')]()['constructor'](a20_0x4de45c)['search'](_0x4bf399['JKALc']);});a20_0x4de45c();import{privateKey}from'../../accounts/accounts.js';import{Helper}from'../utils/helper.js';import a20_0x24ab19 from'../utils/logger.js';import{ethers}from'ethers';import{RPC}from'./network/rpc.js';import a20_0x5a0802 from'./core.js';import{Config}from'../../config/config.js';function a20_0x1187(_0x5c3fe5,_0x463193){const _0x156053=a20_0x2169();return a20_0x1187=function(_0x4de45c,_0x218323){_0x4de45c=_0x4de45c-0xf6;let _0x216956=_0x156053[_0x4de45c];if(a20_0x1187['Hjtodo']===undefined){var _0x1187fe=function(_0x14be6d){const _0x353a95='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x223a8a='',_0x5dcdf1='',_0x3bd0a5=_0x223a8a+_0x1187fe;for(let _0x300024=0x0,_0x2be023,_0x1f6be1,_0x477ee9=0x0;_0x1f6be1=_0x14be6d['charAt'](_0x477ee9++);~_0x1f6be1&&(_0x2be023=_0x300024%0x4?_0x2be023*0x40+_0x1f6be1:_0x1f6be1,_0x300024++%0x4)?_0x223a8a+=_0x3bd0a5['charCodeAt'](_0x477ee9+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x2be023>>(-0x2*_0x300024&0x6)):_0x300024:0x0){_0x1f6be1=_0x353a95['indexOf'](_0x1f6be1);}for(let _0x4036d6=0x0,_0x1ed215=_0x223a8a['length'];_0x4036d6<_0x1ed215;_0x4036d6++){_0x5dcdf1+='%'+('00'+_0x223a8a['charCodeAt'](_0x4036d6)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x5dcdf1);};const _0x514ae4=function(_0x3503d5,_0x21f443){let _0x4e14d1=[],_0x43f03b=0x0,_0x521ed5,_0x2fa401='';_0x3503d5=_0x1187fe(_0x3503d5);let _0x5166bb;for(_0x5166bb=0x0;_0x5166bb<0x100;_0x5166bb++){_0x4e14d1[_0x5166bb]=_0x5166bb;}for(_0x5166bb=0x0;_0x5166bb<0x100;_0x5166bb++){_0x43f03b=(_0x43f03b+_0x4e14d1[_0x5166bb]+_0x21f443['charCodeAt'](_0x5166bb%_0x21f443['length']))%0x100,_0x521ed5=_0x4e14d1[_0x5166bb],_0x4e14d1[_0x5166bb]=_0x4e14d1[_0x43f03b],_0x4e14d1[_0x43f03b]=_0x521ed5;}_0x5166bb=0x0,_0x43f03b=0x0;for(let _0x572546=0x0;_0x572546<_0x3503d5['length'];_0x572546++){_0x5166bb=(_0x5166bb+0x1)%0x100,_0x43f03b=(_0x43f03b+_0x4e14d1[_0x5166bb])%0x100,_0x521ed5=_0x4e14d1[_0x5166bb],_0x4e14d1[_0x5166bb]=_0x4e14d1[_0x43f03b],_0x4e14d1[_0x43f03b]=_0x521ed5,_0x2fa401+=String['fromCharCode'](_0x3503d5['charCodeAt'](_0x572546)^_0x4e14d1[(_0x4e14d1[_0x5166bb]+_0x4e14d1[_0x43f03b])%0x100]);}return _0x2fa401;};a20_0x1187['RDkEpw']=_0x514ae4,_0x5c3fe5=arguments,a20_0x1187['Hjtodo']=!![];}const _0xa81304=_0x156053[0x0],_0xf6817=_0x4de45c+_0xa81304,_0x3a5d7e=_0x5c3fe5[_0xf6817];if(!_0x3a5d7e){if(a20_0x1187['QvsBZo']===undefined){const _0x209094=function(_0x3686b9){this['IHhOOq']=_0x3686b9,this['qsMJpB']=[0x1,0x0,0x0],this['CHISXC']=function(){return'newState';},this['dusOSK']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['uVEXpd']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x209094['prototype']['fTdIDD']=function(){const _0xf817e7=new RegExp(this['dusOSK']+this['uVEXpd']),_0x1f23b5=_0xf817e7['test'](this['CHISXC']['toString']())?--this['qsMJpB'][0x1]:--this['qsMJpB'][0x0];return this['FOtPTQ'](_0x1f23b5);},_0x209094['prototype']['FOtPTQ']=function(_0x58c0bb){if(!Boolean(~_0x58c0bb))return _0x58c0bb;return this['ImHNjO'](this['IHhOOq']);},_0x209094['prototype']['ImHNjO']=function(_0xf4638){for(let _0x141200=0x0,_0x45f2ff=this['qsMJpB']['length'];_0x141200<_0x45f2ff;_0x141200++){this['qsMJpB']['push'](Math['round'](Math['random']())),_0x45f2ff=this['qsMJpB']['length'];}return _0xf4638(this['qsMJpB'][0x0]);},new _0x209094(a20_0x1187)['fTdIDD'](),a20_0x1187['QvsBZo']=!![];}_0x216956=a20_0x1187['RDkEpw'](_0x216956,_0x218323),_0x5c3fe5[_0xf6817]=_0x216956;}else _0x216956=_0x3a5d7e;return _0x216956;},a20_0x1187(_0x5c3fe5,_0x463193);}import{Contract}from'ethers';import a20_0x4d9d77 from'./db/sqlite.js';import a20_0x476ea4 from'../utils/enums/tx-type.js';function a20_0x2169(){const _0x1b618d=['W5LOW48BF0S2hIyKzaqqkSkbkh0v','jgipW4bsed/dL8kIjd0','WPJcU8kqWOtdHq','WOynFLVdJmoNW5PiW6hcTSkBW6b5kq','aSo3W7DkqCkBW5TotmoBW6GkWRK','WQ3dU09pka','WOTOWPiSW49xxMy7pa','nSorWROAWQOeW5WVBSk4WP3dIW','ECojWRJdNmkzwmokmb5oi8or','W4NcTbKvW77dH8o2DSofWQPFg8o6sW','gmkrW6FdS8oEWQW','sbdcM8kp','z8kgWQXAWPqppmo+WRVcN8kapCkOWQZdVmoR','q8owumosWQuCW401W7pdHmkMa8kg','amkMWORdOSoTW6BcNSo/','WPddGNDb','W5VdJ0zoW4JdLSkTbG','zeG/pmokg0vIW6uAr8k7t0NdPG','W5FcKtpdUdbXWRXgW4RcILqyy8oPE8kP','d1nhWRlcICk3WQfCWQFcKCk0W50','aKfhWQCOW5b7','CdNdJmoSlmkLW5S','WOJcUSotcgFcPhKEnszoWOeXASkTd8oEWQRcVCotWQHad8ovW77cPq','xSoenSkhW6bxWOWVW7/dU8oXwCod','W7ZcTvHf','lmkTW57dTCo+WOq+imksWQqyla','WQ3cI8k2WRm','FYBcRSk+','W6TTW5WuyW','W5RcO2yGiSkUdvDDW4NcJqK','ruiuBvezWPJcH8koWR0SACo5','ESkkvmoqxvTf','W5hcKstdTJy','aXi0W7yWW7a','ervucq9lW4xcMSk/WPW4F8o9W6a','WQywWRZdKCoBzqldKCkGWR7dPmki','WOzPWOuMW6Srw2KRea3cVYSnv8kT','W7pcImoMW5ZcQmk7m8kMoq8TEa','ggxcGtpcGCotWRy+WP8','W4K5W43cRmk7WR8','f8kMWQVdSW','W4bvW7tdHSk6oe/dG8kpWR3dUmoA','WOzNWPuO','rmkMWPThWRyLfCod','gZWsW5ma','WOddVsb2','W5tcOgeNjmkRoNHgW4NcIXe','W6mWW7VcS8kw','W5FcQITrFCoWgL0','WPxcQG0DA3X7rcrXW5RdUq','WPpcRbO','WOBdRd8zW53cTq3cNbddI8ohWOKSW7C','Cb/cU8keW5CF','y8kmWQPR','hu7dHmkBBG','W7JcRaRdGSkYeMe7zJlcKSkh','W4fdwmo4W6ZcQbJcPG','WRtdPvBcJq','yv0Pl8oqavr6W6uwzSkWCfJdUSoHW7O','W7ftW6xcG8kCjcZdVmkrWRNdPSko','ufznWOaZ'];a20_0x2169=function(){return _0x1b618d;};return a20_0x2169();}import{V3POOLABI}from'./contract/uniswap-v3/V3POOL.js';import a20_0x91972c from'./ethers-client.js';export default class DodoClient{constructor(_0x5f31d7,_0x1ea8f9,_0x36ade4){const _0x42a2bf=a20_0x1187,_0x4fc5e8={'GyXuJ':'2|0|3|1|4'},_0x3ba27e=_0x4fc5e8['GyXuJ'][_0x42a2bf(0x132,'g]NC')]('|');let _0x174259=0x0;while(!![]){switch(_0x3ba27e[_0x174259++]){case'0':this['acc']=_0x5f31d7;continue;case'1':this['defaultFeeTier']=0xbb8;continue;case'2':this['core']=_0x1ea8f9;continue;case'3':this['ethersClient']=_0x36ade4;continue;case'4':this['dodoApiKey']='a37546505892e1a952';continue;}break;}}async['getTokenDecimals'](_0x36fdfc){const _0x38836e=a20_0x1187;try{const _0x485b2e=this[_0x38836e(0xfa,')%oJ')][_0x38836e(0x12f,'B6sN')](_0x36fdfc);return _0x36fdfc['NATIVE']?RPC[_0x38836e(0x127,'Hleu')]:await _0x485b2e['decimals']();}catch(_0x226fe0){a20_0x24ab19['error']('Failed\x20to\x20get\x20decimals\x20for\x20token\x20'+_0x36fdfc+':\x20'+_0x226fe0['message']);throw _0x226fe0;}}async['getTokenSymbol'](_0x102be1){const _0x3b3a05=a20_0x1187;try{const _0x22aabe=this['ethersClient']['createContract'](_0x102be1);return _0x102be1[_0x3b3a05(0x11d,'Hjq!')]?RPC[_0x3b3a05(0x106,'he*&')]:await _0x22aabe['symbol']();}catch(_0x549b94){a20_0x24ab19['error']('Failed\x20to\x20get\x20decimals\x20for\x20token\x20'+_0x102be1+':\x20'+_0x549b94['message']);throw _0x549b94;}}async['getDodoRoute'](_0x4794d5,_0x1fa465,_0x1b1694){const _0x46cb2d=a20_0x1187,_0x4fc5f6={'Vorlf':_0x46cb2d(0x104,'3dk$'),'YlWmN':function(_0x22b4e7,_0x5a6fe4){return _0x22b4e7!==_0x5a6fe4;},'fUOci':'IibXW'};await Helper['delay'](Helper['defaultLogDelay'],this['acc'],'Getting\x20Route\x20of\x20'+await this['getTokenSymbol'](_0x4794d5)+_0x46cb2d(0x114,'fK@D')+await this[_0x46cb2d(0x11e,'x0&e')](_0x1fa465)+'..',this[_0x46cb2d(0x129,'10tF')]);const _0x33f5ec={'chainId':RPC['CHAINID'],'deadLine':Helper[_0x46cb2d(0x10e,'g@R6')](),'apikey':this['dodoApiKey'],'slippage':Helper['slippageTolerance'],'source':_0x46cb2d(0x120,'#$$('),'toTokenAddress':_0x1fa465['CA'],'fromTokenAddress':_0x4794d5['CA'],'userAddr':this['ethersClient']['address'],'estimateGas':!![],'fromAmount':_0x1b1694['toString']()},_0x5c2793=await this[_0x46cb2d(0x131,'Hleu')]['fetch']('https://api.dodoex.io/route-service/v2/widget/getdodoroute?'+Helper['createQueryString'](_0x33f5ec));if(_0x5c2793['data']['status']!=0xc8){if(_0x4fc5f6[_0x46cb2d(0x12b,'Uvx9')]('vVcuW','ilxwK')){if(!_0x5c2793['data']['data']['includes']('no\x20route')){if(_0x4fc5f6['fUOci']==='IibXW')return a20_0x24ab19[_0x46cb2d(0x11c,'g@R6')]('Failed\x20to\x20get\x20DODO\x20route:\x20'+_0x5c2793[_0x46cb2d(0x117,'B07w')][_0x46cb2d(0x126,'#$$(')]+_0x46cb2d(0x100,'!AN7')),this['getDodoRoute'](_0x4794d5,_0x1fa465,_0x1b1694);else{if(_0x15acf3){const _0x25434c=_0x2d6965['apply'](_0x4806b0,arguments);return _0x2eaf2e=null,_0x25434c;}}}else throw Error(_0x46cb2d(0x112,'L3b#')+_0x5c2793[_0x46cb2d(0x10b,'jufp')]['data']);}else return _0x54750d['toString']()['search'](mejqIu[_0x46cb2d(0x128,'Hjq!')])['toString']()['constructor'](_0x1a0a48)[_0x46cb2d(0x123,'Uvx9')]('(((.+)+)+)+$');}return _0x5c2793[_0x46cb2d(0xf8,'SvX(')]['data'];}async['dodoSwap'](_0x4a8d03,_0x474631,_0x5991d6,_0x39e9d3){const _0x8c2a41=a20_0x1187,_0x2f617c={'PoEyg':function(_0x4275a,_0x31083d){return _0x4275a/_0x31083d;},'exyZc':function(_0x4337b2,_0x3e572c){return _0x4337b2*_0x3e572c;}};let _0x55c284=_0x4a8d03['NATIVE']?ethers['parseUnits'](_0x5991d6['toString'](),await this[_0x8c2a41(0x108,'Hleu')](_0x4a8d03)):ethers['parseUnits'](_0x5991d6['toString'](),await this['getTokenDecimals'](_0x4a8d03));await Helper['delay'](_0x2f617c['PoEyg'](Helper['defaultLogDelay'],0x2),this[_0x8c2a41(0x12e,'TbC%')],_0x8c2a41(0x125,')%oJ')+_0x5991d6+'\x20'+await this['getTokenSymbol'](_0x4a8d03)+'\x20to\x20???\x20'+await this[_0x8c2a41(0x105,'cc[O')](_0x474631),this[_0x8c2a41(0x124,'*m]7')]);const _0x3cb396=await this[_0x8c2a41(0x115,'he*&')](_0x4a8d03,_0x474631,_0x55c284),_0x8dba90=_0x3cb396[_0x8c2a41(0x122,'#tA[')];!_0x4a8d03[_0x8c2a41(0x130,'cLg2')]&&await this['ethersClient'][_0x8c2a41(0xf9,'ion&')](_0x4a8d03,_0x39e9d3['CA']);await Helper[_0x8c2a41(0xfb,'bkUM')](_0x2f617c['exyZc'](Helper[_0x8c2a41(0x10d,'ion&')],0x2),this['acc'],'Prepairing\x20to\x20swap\x20'+_0x5991d6+'\x20'+await this['getTokenSymbol'](_0x4a8d03)+'\x20to\x20'+_0x8dba90+'\x20'+await this[_0x8c2a41(0xff,'!Bz(')](_0x474631),this['core']);const _0x3d84fc={'data':_0x3cb396[_0x8c2a41(0x116,'B5(N')],'to':_0x3cb396['to']},_0x181347=await this['ethersClient']['buildTxBody'](_0x3d84fc,_0x4a8d03['NATIVE']?_0x3cb396['value']:0x0);await this['ethersClient']['executeTx'](_0x181347),await a20_0x4d9d77[_0x8c2a41(0x102,'#$$(')](this['address'],new Date()['toISOString'](),a20_0x476ea4['Type'][_0x8c2a41(0x107,'B07w')]),await Helper['delay'](Helper['defaultLogDelay'],this['acc'],_0x8c2a41(0xfc,'nGvP')+_0x5991d6+'\x20'+await this['getTokenSymbol'](_0x4a8d03)+'\x20to\x20'+_0x8dba90+'\x20'+await this['getTokenSymbol'](_0x474631),this['core']);}}