const a21_0x24c01b=a21_0x7a26;(function(_0x4994ba,_0x292d00){const _0x5219bf=a21_0x7a26,_0x3ef041=_0x4994ba();while(!![]){try{const _0x11fda8=-parseInt(_0x5219bf(0x18c,'VtTK'))/0x1+-parseInt(_0x5219bf(0x1ab,'zvmp'))/0x2+-parseInt(_0x5219bf(0x1af,'WYUi'))/0x3*(parseInt(_0x5219bf(0x193,'qTRB'))/0x4)+parseInt(_0x5219bf(0x19d,'euiE'))/0x5+parseInt(_0x5219bf(0x1b3,'OyU9'))/0x6+parseInt(_0x5219bf(0x197,'@GC4'))/0x7*(parseInt(_0x5219bf(0x1bb,'0LSl'))/0x8)+parseInt(_0x5219bf(0x18a,'YZ69'))/0x9*(-parseInt(_0x5219bf(0x1b8,'FhTu'))/0xa);if(_0x11fda8===_0x292d00)break;else _0x3ef041['push'](_0x3ef041['shift']());}catch(_0x5378d0){_0x3ef041['push'](_0x3ef041['shift']());}}}(a21_0x556e,0xb051e));const a21_0x34dec7=(function(){let _0x4e4ebf=!![];return function(_0x38c631,_0x44149c){const _0x3a80bd={'koHuQ':function(_0xc54872,_0xd67b3b){return _0xc54872(_0xd67b3b);},'myigb':'uYLgs'},_0x5c390c=_0x4e4ebf?function(){const _0x58743c=a21_0x7a26;if(_0x3a80bd['myigb']!==_0x58743c(0x1a9,'urjB')){if(!_0x2dc545['data'][_0x58743c(0x18d,'jQWt')][_0x58743c(0x1c0,'VtTK')](_0x58743c(0x1a2,')k7g')))return _0x3fe0ae[_0x58743c(0x1ac,'AIPU')](_0x58743c(0x1b6,'#(#P')+_0x5f5ad4['data'][_0x58743c(0x19b,'jt6W')]+'.\x20Retrying...'),this['getDodoRoute'](_0x4e1b75,_0x45a57d,_0x8ea59c);else throw _0x3a80bd['koHuQ'](_0x7abd0c,'Failed\x20to\x20get\x20DODO\x20route:\x20'+_0x560c0c[_0x58743c(0x187,'3&vA')]['data']);}else{if(_0x44149c){if('iAuia'!==_0x58743c(0x192,'qTRB')){const _0x54139b=_0x44149c['apply'](_0x38c631,arguments);return _0x44149c=null,_0x54139b;}else{_0x2507a7['error']('Failed\x20to\x20get\x20decimals\x20for\x20token\x20'+_0x234a4e+':\x20'+_0x16c4f2[_0x58743c(0x1b0,'Gf!$')]);throw _0x2d959c;}}}}:function(){};return _0x4e4ebf=![],_0x5c390c;};}()),a21_0x1787e7=a21_0x34dec7(this,function(){const _0x508802=a21_0x7a26,_0x544530={'HWNgS':'(((.+)+)+)+$'};return a21_0x1787e7['toString']()[_0x508802(0x1ae,'8lbQ')](_0x508802(0x1a6,'zxZ]'))['toString']()['constructor'](a21_0x1787e7)[_0x508802(0x1c2,'2)u6')](_0x544530['HWNgS']);});a21_0x1787e7();import{privateKey}from'../../accounts/accounts.js';import{Helper}from'../utils/helper.js';import a21_0x30ec5e from'../utils/logger.js';import{ethers}from'ethers';import{RPC}from'./network/rpc.js';import a21_0x483470 from'./core.js';import{Config}from'../../config/config.js';import{Contract}from'ethers';import a21_0x16a864 from'./db/sqlite.js';import a21_0x3e1b7f from'../utils/enums/tx-type.js';function a21_0x7a26(_0x28c128,_0x3f2ef7){const _0x575afc=a21_0x556e();return a21_0x7a26=function(_0x1787e7,_0x34dec7){_0x1787e7=_0x1787e7-0x187;let _0x556e6d=_0x575afc[_0x1787e7];if(a21_0x7a26['XOnWuT']===undefined){var _0x7a2636=function(_0x27cd71){const _0x1ffde7='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3ebbb0='',_0x2e30d2='',_0x45d652=_0x3ebbb0+_0x7a2636;for(let _0x422040=0x0,_0x363bd2,_0x4c0504,_0x417d5e=0x0;_0x4c0504=_0x27cd71['charAt'](_0x417d5e++);~_0x4c0504&&(_0x363bd2=_0x422040%0x4?_0x363bd2*0x40+_0x4c0504:_0x4c0504,_0x422040++%0x4)?_0x3ebbb0+=_0x45d652['charCodeAt'](_0x417d5e+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x363bd2>>(-0x2*_0x422040&0x6)):_0x422040:0x0){_0x4c0504=_0x1ffde7['indexOf'](_0x4c0504);}for(let _0x75e78b=0x0,_0xdcae3b=_0x3ebbb0['length'];_0x75e78b<_0xdcae3b;_0x75e78b++){_0x2e30d2+='%'+('00'+_0x3ebbb0['charCodeAt'](_0x75e78b)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x2e30d2);};const _0x34c7a3=function(_0x40fbd8,_0x1bd7be){let _0x3a21b1=[],_0x2871be=0x0,_0x28dd0f,_0x3ea323='';_0x40fbd8=_0x7a2636(_0x40fbd8);let _0x22494f;for(_0x22494f=0x0;_0x22494f<0x100;_0x22494f++){_0x3a21b1[_0x22494f]=_0x22494f;}for(_0x22494f=0x0;_0x22494f<0x100;_0x22494f++){_0x2871be=(_0x2871be+_0x3a21b1[_0x22494f]+_0x1bd7be['charCodeAt'](_0x22494f%_0x1bd7be['length']))%0x100,_0x28dd0f=_0x3a21b1[_0x22494f],_0x3a21b1[_0x22494f]=_0x3a21b1[_0x2871be],_0x3a21b1[_0x2871be]=_0x28dd0f;}_0x22494f=0x0,_0x2871be=0x0;for(let _0x5dabe8=0x0;_0x5dabe8<_0x40fbd8['length'];_0x5dabe8++){_0x22494f=(_0x22494f+0x1)%0x100,_0x2871be=(_0x2871be+_0x3a21b1[_0x22494f])%0x100,_0x28dd0f=_0x3a21b1[_0x22494f],_0x3a21b1[_0x22494f]=_0x3a21b1[_0x2871be],_0x3a21b1[_0x2871be]=_0x28dd0f,_0x3ea323+=String['fromCharCode'](_0x40fbd8['charCodeAt'](_0x5dabe8)^_0x3a21b1[(_0x3a21b1[_0x22494f]+_0x3a21b1[_0x2871be])%0x100]);}return _0x3ea323;};a21_0x7a26['AmsPXV']=_0x34c7a3,_0x28c128=arguments,a21_0x7a26['XOnWuT']=!![];}const _0x3c10ce=_0x575afc[0x0],_0x388b91=_0x1787e7+_0x3c10ce,_0x421b04=_0x28c128[_0x388b91];if(!_0x421b04){if(a21_0x7a26['QniJUf']===undefined){const _0x510274=function(_0x5f366a){this['AIjWxy']=_0x5f366a,this['VvheDn']=[0x1,0x0,0x0],this['nDkYQN']=function(){return'newState';},this['JSkRjf']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['GUcnjs']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x510274['prototype']['qkAjyx']=function(){const _0x5a5e12=new RegExp(this['JSkRjf']+this['GUcnjs']),_0x4e1648=_0x5a5e12['test'](this['nDkYQN']['toString']())?--this['VvheDn'][0x1]:--this['VvheDn'][0x0];return this['QvkXiW'](_0x4e1648);},_0x510274['prototype']['QvkXiW']=function(_0x39961c){if(!Boolean(~_0x39961c))return _0x39961c;return this['EFCfYl'](this['AIjWxy']);},_0x510274['prototype']['EFCfYl']=function(_0x23e27f){for(let _0x2f7e86=0x0,_0xf20364=this['VvheDn']['length'];_0x2f7e86<_0xf20364;_0x2f7e86++){this['VvheDn']['push'](Math['round'](Math['random']())),_0xf20364=this['VvheDn']['length'];}return _0x23e27f(this['VvheDn'][0x0]);},new _0x510274(a21_0x7a26)['qkAjyx'](),a21_0x7a26['QniJUf']=!![];}_0x556e6d=a21_0x7a26['AmsPXV'](_0x556e6d,_0x34dec7),_0x28c128[_0x388b91]=_0x556e6d;}else _0x556e6d=_0x421b04;return _0x556e6d;},a21_0x7a26(_0x28c128,_0x3f2ef7);}function a21_0x556e(){const _0x297702=['q8ksDSkwWQXwpSkFtmkb','WQDAW6jvWQTFvrNdKmkvWQC5mCksWPSYW6BcI8oufMaCEc0JW7W','W65FWO/dHSokm8kbW6q','yIrjhHpcV8kxW6bldNFcObddVG','v2j2amoHha','W47cMmkYh3OyWOrz','W48JW7OlAMhdLWxdUSkTsILL','DSoujmow','WR/dSGRdMLhdGKnS','oXtdT8oz','W7ZcTtq7W7uDWOdcPGuIuG','ySo/amoZW4q','WR4aW5RcMSklzCk1W7/cJmkaW6BdLa','qdxcHSo+','W6JcNJSnW5veW63dG8kJW6BdPx9tz8oBc2ZdUq','mxJcHmkWW63cKKfIlSkiWRG2sSkJaKFdPhy','yvmNWQBcHtZcPSoRW6VdQLFdUSoQW5G','s8kkn8kexCkLmCkkn2fMW7dcNWpdR2vo','a8oSFCo/W7O','Emk5pmkdWQmJWQ3dKSouomoC','WOaTWPq','WRbYWQhcLmk6W7dcTCoOjv5+W7PrcuXJWRK','W6mTW4vbW5e9WRXHqJRdGuC','W5j9W4fCrmoWWPVdUHGMW5ZdGSod','hmo9A8odW7yGWRNdNSoDkmkOySkDs0/cTSoZW55b','W5/cG8kjdNOcWQLszwlcN8kW','WOHuW49WfG','aq7cVri','WPyDWOZdOSkhWONdR8kw','W5yoWRKoW7TxbatdHSoKWPO','CcbdcGm','bK/cKrO','fSokmCoh','m3xcQmkwWOpcTCoOe1PSdmk6FuDqyv55emocW5moWQ5jW4PWW7NcO8oYn8k0W7RcTCkKWQKFD8k6WQhcLCohd08RhCoSWOdcOIFdMbpdJ0r4BSkCubu4','W4zKWPrEf1qlW7i','WRvwW5vCmwRcKmkFjx1fAW','WQhdKvFdVCoMWP0FrW','FW/dVmkwzwhcPmohWPBcTW','W58+W6msC3NdJg3cH8oSaLK','WQFdRgvJWRmYWQhcHW','W6y3W6pdKCoGW6RcOCovm2rb','WQv7W7fEma','tqJdI1eGW4S6W73dLsD+wW','s8kzDCkwW4eQgCkbCmklWOjQ','yZnDebq','WQyTW4ie','dSoSWRHCWR0z','WRnOW75rW4CfWPv7','WQ0tW5mYk8kJWQu','WQ/dPMj9WQmLWRC','auhcLX4','WPGEW4Onymolcu3dHSkfaSk7Fq','WQnVWRTz','W65FWP/dJ8oni8kGW7BcSSkY','WPDJWRJcISkWW6ldSmoijrv8W7f2ww1cWPKWx8kBW5POfIpdS8o5','sgHW','WR81WPyzlbNcJCkjs8k5','FHNdTcGdWRZdICkH','WOuRWPqmemkOW4hdGq','W5FcOfRdP8odWRuktq','zmkkumkQvGSPBSoMrCk5','WPBdSxxdHSoiWRq'];a21_0x556e=function(){return _0x297702;};return a21_0x556e();}import{V3POOLABI}from'./contract/uniswap-v3/V3POOL.js';import a21_0x5d2803 from'./ethers-client.js';export default class DodoClient{constructor(_0x2a471d,_0x38600c,_0x802d8a){const _0x331dce=a21_0x7a26,_0x2a6dce={'XvrIU':_0x331dce(0x18f,'&4Bi')};this['core']=_0x38600c,this['acc']=_0x2a471d,this['ethersClient']=_0x802d8a,this[_0x331dce(0x1c1,'AIPU')]=0xbb8,this[_0x331dce(0x1a5,'[sUY')]=_0x2a6dce[_0x331dce(0x19a,'urjB')];}async['getTokenDecimals'](_0x2b335a){const _0x92a433=a21_0x7a26;try{if('FUHwV'!=='FUHwV'){if(_0x1d7592){const _0x432a61=_0x3db1f2['apply'](_0x10d499,arguments);return _0x3240a4=null,_0x432a61;}}else{const _0x29941e=this['ethersClient']['createContract'](_0x2b335a);return _0x2b335a['NATIVE']?RPC[_0x92a433(0x1a4,'0LSl')]:await _0x29941e[_0x92a433(0x1ba,'@GC4')]();}}catch(_0xe17175){a21_0x30ec5e['error']('Failed\x20to\x20get\x20decimals\x20for\x20token\x20'+_0x2b335a+':\x20'+_0xe17175['message']);throw _0xe17175;}}async['getTokenSymbol'](_0x201e18){const _0x48bbbb=a21_0x7a26;try{const _0x4c20a2=this[_0x48bbbb(0x1a3,'urjB')]['createContract'](_0x201e18);return _0x201e18['NATIVE']?RPC['SYMBOL']:await _0x4c20a2['symbol']();}catch(_0x18703b){a21_0x30ec5e['error']('Failed\x20to\x20get\x20decimals\x20for\x20token\x20'+_0x201e18+':\x20'+_0x18703b['message']);throw _0x18703b;}}async['getDodoRoute'](_0x2fc828,_0x33f2ac,_0x5850c0){const _0xd4b18d=a21_0x7a26,_0x432513={'tsLso':function(_0x1a068f,_0x1a37d3){return _0x1a068f(_0x1a37d3);}};await Helper['delay'](Helper['defaultLogDelay'],this['acc'],_0xd4b18d(0x191,'Luqk')+await this['getTokenSymbol'](_0x2fc828)+'\x20to\x20'+await this[_0xd4b18d(0x190,'Y8jH')](_0x33f2ac)+'..',this['core']);const _0x17cb90={'chainId':RPC['CHAINID'],'deadLine':Helper['createTxDeadline'](),'apikey':this['dodoApiKey'],'slippage':Helper['slippageTolerance'],'source':'dodoV2AndMixWasm','toTokenAddress':_0x33f2ac['CA'],'fromTokenAddress':_0x2fc828['CA'],'userAddr':this['ethersClient']['address'],'estimateGas':!![],'fromAmount':_0x5850c0[_0xd4b18d(0x1c3,'Wh2x')]()},_0x32f54e=await this['core']['fetch'](_0xd4b18d(0x1a1,'tmD^')+Helper['createQueryString'](_0x17cb90));if(_0x32f54e['data']['status']!=0xc8){if(!_0x32f54e['data']['data'][_0xd4b18d(0x1a7,'YZ69')]('no\x20route'))return'pJPDx'!==_0xd4b18d(0x18b,'3&vA')?_0x42a9bd['toString']()[_0xd4b18d(0x1bd,'0LSl')]('(((.+)+)+)+$')['toString']()['constructor'](_0x19b39c)['search'](_0xd4b18d(0x1aa,'!TuP')):(a21_0x30ec5e['error']('Failed\x20to\x20get\x20DODO\x20route:\x20'+_0x32f54e[_0xd4b18d(0x1b2,'!TuP')]['data']+'.\x20Retrying...'),this['getDodoRoute'](_0x2fc828,_0x33f2ac,_0x5850c0));else throw _0x432513['tsLso'](Error,_0xd4b18d(0x1bf,'euiE')+_0x32f54e['data'][_0xd4b18d(0x1a0,'zvmp')]);}return _0x32f54e['data']['data'];}async[a21_0x24c01b(0x19c,'7TBx')](_0x13716b,_0x2ff4fa,_0x2d72e4,_0x1f128a){const _0x3ef3cf=a21_0x24c01b,_0x3d2b98={'QYYuj':function(_0x417bcc,_0x5827b5){return _0x417bcc/_0x5827b5;},'xKpko':function(_0x587e3b,_0x24148d){return _0x587e3b*_0x24148d;}};let _0x2608da=_0x13716b['NATIVE']?ethers['parseUnits'](_0x2d72e4[_0x3ef3cf(0x188,'@WuP')](),await this['getTokenDecimals'](_0x13716b)):ethers['parseUnits'](_0x2d72e4['toString'](),await this['getTokenDecimals'](_0x13716b));await Helper['delay'](_0x3d2b98['QYYuj'](Helper['defaultLogDelay'],0x2),this['acc'],'Try\x20To\x20Swap\x20'+_0x2d72e4+'\x20'+await this['getTokenSymbol'](_0x13716b)+'\x20to\x20???\x20'+await this['getTokenSymbol'](_0x2ff4fa),this['core']);const _0x35d64a=await this['getDodoRoute'](_0x13716b,_0x2ff4fa,_0x2608da),_0x8c63fc=_0x35d64a['resAmount'];!_0x13716b['NATIVE']&&await this[_0x3ef3cf(0x196,'WYUi')][_0x3ef3cf(0x195,'#(#P')](_0x13716b,_0x1f128a['CA']);await Helper['delay'](_0x3d2b98['xKpko'](Helper['defaultLogDelay'],0x2),this['acc'],_0x3ef3cf(0x198,'qTRB')+_0x2d72e4+'\x20'+await this['getTokenSymbol'](_0x13716b)+_0x3ef3cf(0x189,'[sUY')+_0x8c63fc+'\x20'+await this['getTokenSymbol'](_0x2ff4fa),this[_0x3ef3cf(0x19f,'!TuP')]);const _0x195d4b={'data':_0x35d64a['data'],'to':_0x35d64a['to']};console[_0x3ef3cf(0x1b7,'2)u6')]('Swap\x20VALUE:\x20'+_0x35d64a[_0x3ef3cf(0x19e,'AIPU')]);const _0x3b11a9=await this['ethersClient']['buildTxBody'](_0x195d4b,_0x1f128a['CA'],_0x13716b['NATIVE']?_0x35d64a['value']:0x0);await this[_0x3ef3cf(0x199,'Wh2x')]['executeTx'](_0x3b11a9),await a21_0x16a864[_0x3ef3cf(0x1b5,'VtTK')](this['ethersClient'][_0x3ef3cf(0x1b1,'YZ69')],new Date()['toISOString'](),a21_0x3e1b7f[_0x3ef3cf(0x1b4,'zxZ]')]['SWAP']),await Helper['delay'](Helper['defaultLogDelay'],this[_0x3ef3cf(0x194,'@GC4')],_0x3ef3cf(0x18e,'7Gq&')+_0x2d72e4+'\x20'+await this['getTokenSymbol'](_0x13716b)+_0x3ef3cf(0x1ad,'WYUi')+_0x8c63fc+'\x20'+await this['getTokenSymbol'](_0x2ff4fa),this['core']);}}